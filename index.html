
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Chicken&#8217;s Blog ^_^</title>
  <meta name="author" content="codeforfoods">

  
  <meta name="description" content="In previous post I have wrote how to use Chef Solo to setup and deploy a Server with PHP stuff. Today I&rsquo;d like to use Chef Server for storing &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://codeforfoods.net">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Chicken's Blog ^_^" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- Social media content metadata -->

  



  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-56334390-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Chicken&#8217;s Blog ^_^</a></h1>
  
    <h2>(Just code for food)</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:codeforfoods.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/01/work-with-chef-server/">Work With Chef Server</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://codeforfoods.net">codeforfoods</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-12-01T16:44:10+07:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>4:44 pm</span></time>
        
           | <a href="/blog/2014/12/01/work-with-chef-server/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/12/01/work-with-chef-server/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In <a href="blog/2014/11/07/php-cooking/">previous post</a> I have wrote how to use Chef Solo to setup and deploy a Server with PHP stuff. Today I&rsquo;d like to use Chef Server for storing Chef&rsquo;s configurations (Cookbooks, Roles, Enviroments, Data Bags) and Bootstrap a server use Chef Server.</p>

<h1>Setup Chef Server</h1>

<p>The easiest way to get started with a Chef server is to use Opscode’s <a href="http://www.opscode.com/hosted-chef/">Hosted Chef</a>–it’s free for up to 5 nodes. Once you exceed 5 nodes you can decide whether to pay a monthly fee or install your own Chef server.</p>

<ul>
<li>Register your free trial of hosted Chef</li>
</ul>


<p><img src="https://lh5.googleusercontent.com/-PeezzBJhRrE/VHwwAKgzq7I/AAAAAAAAABk/OBw78YVf5Mk/w707-h604-no/Sign_Up_-_Chef_Manage.png"></p>

<ul>
<li>Get pem key from profile</li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-_tKhvVNO0u8/VHww8xtE59I/AAAAAAAAABw/O_cbtONexe0/w791-h640-no/Chef_-_Account_Management.png"></p>

<ul>
<li>Generate Knife config</li>
</ul>


<p><img src="https://lh4.googleusercontent.com/-xyw-Lzc3V5Y/VHwzDvnqQwI/AAAAAAAAACY/RJsXXJP_6VY/w710-h640-no/Chef_Manage_and_php-cooking_%E2%80%94_bash_%E2%80%94_162%C3%9730.png"></p>

<ul>
<li>Fork the <code>php-cooking</code> from <a href="blog/2014/11/07/php-cooking/">previous post</a></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://github.com/code-for-food/php-cooking.git # fork from github</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Move to <code>php-cooking</code> and copy client key and validation key to <code>.chef</code> folder.</p></li>
<li><p>Replace the knife.rb in .chef folder</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">current_dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'><span class="n">log_level</span>                <span class="ss">:info</span>
</span><span class='line'><span class="n">log_location</span>             <span class="no">STDOUT</span>
</span><span class='line'><span class="n">node_name</span>                <span class="s2">&quot;codeforfoods&quot;</span>
</span><span class='line'><span class="n">client_key</span>               <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/codeforfoods.pem&quot;</span> <span class="c1"># replace by your key</span>
</span><span class='line'><span class="n">validation_client_name</span>   <span class="s2">&quot;chicken-validator&quot;</span>
</span><span class='line'><span class="n">validation_key</span>           <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/chicken-validator.pem&quot;</span> <span class="c1"># replace by your key</span>
</span><span class='line'><span class="n">chef_server_url</span>          <span class="s2">&quot;https://api.opscode.com/organizations/chicken&quot;</span>
</span><span class='line'><span class="n">cache_type</span>               <span class="s1">&#39;BasicFile&#39;</span>
</span><span class='line'><span class="n">cache_options</span><span class="p">(</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/.chef/checksums&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook_path</span>    <span class="o">[</span><span class="s2">&quot;cookbooks&quot;</span><span class="p">,</span> <span class="s2">&quot;site-cookbooks&quot;</span><span class="o">]</span>
</span><span class='line'><span class="n">node_path</span>        <span class="s2">&quot;nodes&quot;</span>
</span><span class='line'><span class="n">role_path</span>        <span class="s2">&quot;roles&quot;</span>
</span><span class='line'><span class="n">environment_path</span> <span class="s2">&quot;environments&quot;</span>
</span><span class='line'><span class="n">data_bag_path</span>    <span class="s2">&quot;data_bags&quot;</span>
</span><span class='line'><span class="n">encrypted_data_bag_secret</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/encrypted_data_bag_secret&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Upload cookbooks to Chef server</p>

<pre><code>  knife cookbook upload --all
</code></pre></li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-0WxqaSjoQfE/VHw9TgYqHEI/AAAAAAAAACo/qyVX1k3ZFdY/w266-h293-no/php-cooking_%E2%80%94_bash_%E2%80%94_162%C3%9730.png"></p>

<p>View on Chef server</p>

<p><img src="https://lh3.googleusercontent.com/-_jRaxKzYeac/VHw92i4RIYI/AAAAAAAAACw/ybd_zPQg7gA/w775-h591-no/Chef_Manage_and_Picasa_3.png"></p>

<ul>
<li><p>Upload Roles to Chef Server</p>

<pre><code>   knife role from file roles/myapp.json 
   knife role from file roles/myapp_deploy.json
</code></pre></li>
</ul>


<p>View on Server</p>

<p><img src="https://lh6.googleusercontent.com/-ARi99k01P8E/VHw_QKAtUPI/AAAAAAAAAC8/weO6WZ8ub-o/w558-h186-no/Chef_Manage.png"></p>

<ul>
<li>Create new enviroment called <code>staging</code> by create staging.json file in <code>enviroments</code> folder</li>
</ul>


<figure class='code'><figcaption><span>staging.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;staging&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;apache2&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;listen_ports&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="s2">&quot;80&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;443&quot;</span>
</span><span class='line'>      <span class="p">]</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;ext_conf_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/php5/apache2/conf.d&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;ubuntu&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;root_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/var/www/codeforfoods&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;server_name&quot;</span><span class="p">:</span> <span class="s2">&quot;phpdev.codeforfoods.net&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Environment&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;environment&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Upload Enviroments to Chef Server</p>

<pre><code>  knife environment from file environments/dev.json 
  knife environment from file environments/staging.json 
</code></pre></li>
</ul>


<p>View on Server</p>

<p><img src="https://lh4.googleusercontent.com/-kUMwE9lMI1k/VHxAFiJZKcI/AAAAAAAAADE/tVMTf4MMHhQ/w333-h240-no/Chef_Manage.png"></p>

<ul>
<li><p>Create an encrypted data bag</p>

<ul>
<li><p>Create encrypted data bag key, the key would help to decrypted the data bag</p>

<pre><code>  openssl rand -base64 512 | tr -d 'rn' &gt; ~/.chef/encrypted_data_bag_secret
  chmod 600 ~/.chef/encrypted_data_bag_secret
</code></pre></li>
<li><p>Add below line to <code>.chef/knife.rb</code></p>

<pre><code>  encrypted_data_bag_secret "#{current_dir}/encrypted_data_bag_secret"
</code></pre></li>
<li><p>Create the encrypted data bage</p>

<pre><code>   knife data bag create --secret-file ~/.chef/encrypted_data_bag_secret secrets myapp
</code></pre></li>
</ul>


<p>  <img src="https://lh6.googleusercontent.com/--OFW4K4ZuFk/VHxfvrX4DCI/AAAAAAAAADU/SGCTIKaQW9s/w290-h249-no/php-cooking_%E2%80%94_vim_%E2%80%94_162%C3%9730.png"></p>

<p>  View on Server</p>

<p>  <img src="https://lh3.googleusercontent.com/-1W37bGO_9FU/VHxifiyiOCI/AAAAAAAAADg/VsHn4LbYVf4/w958-h421-no/Chef_Manage.png"></p></li>
</ul>


<h1>Setup Vagrant use chef-client as provision</h1>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'><span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
</span><span class='line'><span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span class='line'><span class="no">CHEF_PATH</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span class='line'><span class="no">SYNC_PATH</span> <span class="o">=</span> <span class="s2">&quot;./www&quot;</span>
</span><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;ubuntu14.04&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://oss-binaries.phusionpassenger.com/vagrant/boxes/latest/ubuntu-14.04-amd64-vbox.box&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.34.100&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;devphp.congdang.com&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>   <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnshostresolver1&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnsproxy1&quot;</span><span class="p">,</span>        <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--memory&quot;</span><span class="p">,</span>              <span class="s2">&quot;1024&quot;</span> <span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="s1">&#39;11.16.0&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Your organization name for hosted Chef </span>
</span><span class='line'>  <span class="n">orgname</span> <span class="o">=</span> <span class="s2">&quot;chicken&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Set the Chef node ID based on environment variable NODE, if set. Otherwise default to vagrant-$USER</span>
</span><span class='line'>  <span class="n">node</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;NODE&#39;</span><span class="o">]</span>
</span><span class='line'>  <span class="n">node</span> <span class="o">||=</span> <span class="s2">&quot;vagrant-codeforfoods&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_client</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">chef_server_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.opscode.com/organizations/</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">validation_key_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/.chef/</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">-validator.pem&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">validation_client_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">-validator&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">encrypted_data_bag_secret_key_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/.chef/encrypted_data_bag_secret&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">node_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">node</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">provisioning_path</span> <span class="o">=</span> <span class="s2">&quot;/etc/chef&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="ss">:debug</span>
</span><span class='line'>    <span class="c1">#chef.log_level = :info</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">add_role</span><span class="p">(</span><span class="s2">&quot;myapp&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#chef.json.merge!({ :mysql_password =&gt; &quot;foo&quot; }) # You can do this to override any default attributes for this node.</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="no">SYNC_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:owner</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:mount_options</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;dmode=777&#39;</span><span class="p">,</span><span class="s1">&#39;fmode=777&#39;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Starting <code>Vagrant</code></p>

<pre><code>    vagrant up
</code></pre>

<p>Chef the webapp on browser</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">http</span><span class="p">:</span><span class="sr">//</span><span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">34</span><span class="o">.</span><span class="mi">100</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h1>Bootstrap a Server</h1>

<p><a href="http://cloudshare.com">Cloudshare</a> provides a easy way to create new node for testing <a href="http://learn.getchef.com/ubuntu/bootstrap-your-node/">More detail here</a></p>

<ul>
<li>Get a Linux machine to bootstrap</li>
</ul>


<p><img src="https://lh5.googleusercontent.com/-rJtVKEyp_-k/VHx18JYfv0I/AAAAAAAAADw/fECENQ9LPqo/w661-h524-no/Machines.png"></p>

<ul>
<li><p>Bootstrap your node</p>

<pre><code>  knife bootstrap uvo1vinqr3ty38kwnpn.vm.cld.sr -x sysadmin -P Oi9YB7HTfP --sudo -N node1 -r 'role[myapp]' -E staging
</code></pre></li>
</ul>


<p>** If you meet the error while creating the node, please see the comment in this <a href="https://groups.google.com/forum/#!topic/learnchef-fundamentals-webinar/LYe_i_QIWdU">https://groups.google.com/forum/#!topic/learnchef-fundamentals-webinar/LYe_i_QIWdU</a></p>

<p>Error</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>54.79.58.34   knife ssl check -c /etc/chef/client.rb
</span><span class='line'>54.79.58.34 <span class="sb">```</span>
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Starting Chef Client, version 11.16.4
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 <span class="o">================================================================================</span>
</span><span class='line'>54.79.58.34 Chef encountered an error attempting to load the node data <span class="k">for</span> <span class="s2">&quot;testnode&quot;</span>
</span><span class='line'>54.79.58.34 <span class="o">================================================================================</span>
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Authentication Error:
</span><span class='line'>54.79.58.34 ---------------------
</span><span class='line'>54.79.58.34 Failed to authenticate to the chef server <span class="o">(</span>http 401<span class="o">)</span>.
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Server Response:
</span><span class='line'>54.79.58.34 ----------------
</span><span class='line'>54.79.58.34 Failed to authenticate as <span class="s1">&#39;testnode&#39;</span>. Ensure that your node_name and client key are correct.
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Relevant Config Settings:
</span><span class='line'>54.79.58.34 -------------------------
</span><span class='line'>54.79.58.34 chef_server_url   <span class="s2">&quot;https://api.opscode.com/organizations/cd-chef&quot;</span>
</span><span class='line'>54.79.58.34 node_name         <span class="s2">&quot;testnode&quot;</span>
</span><span class='line'>54.79.58.34 client_key        <span class="s2">&quot;/etc/chef/client.pem&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>SSH to server and do this command</p>

<pre><code>    sudo rm -rf /etc/chef/client.pem
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/28/rails-protocol/">Rails Protocol</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="https://github.com/thoughtbot/guides/tree/master/protocol/rails">rails-protocol</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-28T10:05:34+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:05 am</span></time>
        
           | <a href="/blog/2014/11/28/rails-protocol/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/28/rails-protocol/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A guide for writing great web apps.</p>

<h4>Set Up Laptop</h4>

<p>Set up your laptop with :</p>

<ul>
<li><p><a href="https://github.com/thoughtbot/laptop">https://github.com/thoughtbot/laptop</a></p></li>
<li><p><a href="https://github.com/thoughtbot/dotfiles">https://github.com/thoughtbot/dotfiles</a></p></li>
</ul>


<h4>Create App</h4>

<p>Get Suspenders.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install suspenders</span></code></pre></td></tr></table></div></figure>


<p>Create the app.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>suspenders app --heroku true --github organization/app</span></code></pre></td></tr></table></div></figure>


<h4>Set Up App</h4>

<p>Get the code</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@github.com:organization/app.git</span></code></pre></td></tr></table></div></figure>


<p>Set up the app&rsquo;s dependencies</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd project
</span><span class='line'>./bin/setup</span></code></pre></td></tr></table></div></figure>


<p>Use Heroku config to get ENV variables. (<a href="https://github.com/ddollar/heroku-config">https://github.com/ddollar/heroku-config</a>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku config:pull --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Delete extra lines in .env, leaving only those needed for app to function properly. For example: BRAINTREE_MERCHANT_ID and S3_SECRET.</p>

<p>Use Foreman to run the app locally (<a href="https://github.com/ddollar/foreman">https://github.com/ddollar/foreman</a>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>foreman start</span></code></pre></td></tr></table></div></figure>


<p>It uses your .env file and Procfile to run processes like Heroku&rsquo;s Cedar stack. (<a href="https://devcenter.heroku.com/articles/cedar">https://devcenter.heroku.com/articles/cedar</a>)</p>

<h4>Git protocol</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/protocol/git">https://github.com/thoughtbot/guides/tree/master/protocol/git</a></p>

<h4>Product Review</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/protocol/product-review">https://github.com/thoughtbot/guides/tree/master/protocol/product-review</a></p>

<h4>Code Review</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/code-review">https://github.com/thoughtbot/guides/tree/master/code-review</a></p>

<ul>
<li><p>Review data integrity closely, such as migrations that make irreversible changes to the data, and whether there is a related todo to make a database backup during the staging and production deploys.</p></li>
<li><p>Review SQL queries for potential SQL injection.</p></li>
<li><p>Review whether dependency upgrades include a reason in the commit message, such as a link to the dependency&rsquo;s
ChangeLog or NEWS file.</p></li>
<li><p>Review whether new database indexes are necessary if new columns or SQL queries were added.</p></li>
<li><p>Review whether new scheduler (cron) tasks have been added and whether there is a related todo in the project management system to add it during the staging and production deploys.</p></li>
</ul>


<h4>Deploy</h4>

<p>View a list of new commits. View changed files.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git fetch staging
</span><span class='line'>git log staging/master..master
</span><span class='line'>git diff --stat staging/master</span></code></pre></td></tr></table></div></figure>


<p>If necessary, add new environment variables.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku config:add NEW_VARIABLE=value --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Deploy to Heroku</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push staging</span></code></pre></td></tr></table></div></figure>


<p>If necessary, run migrations and restart the dynos.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku run rake db:migrate --remote staging
</span><span class='line'>heroku restart --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Introspect to make sure everything&rsquo;s ok.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>watch heroku ps --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Test the feature in browser.</p>

<p>Deploy to production.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git fetch production
</span><span class='line'>git log production/master..master
</span><span class='line'>git diff --stat production/master
</span><span class='line'>heroku config:add NEW_VARIABLE=value --remote production
</span><span class='line'>git push production
</span><span class='line'>heroku run rake db:migrate --remote production
</span><span class='line'>heroku restart --remote production
</span><span class='line'>watch heroku ps --remote production</span></code></pre></td></tr></table></div></figure>


<p>Watch logs and metrics dashboards.</p>

<p>Close pull request and comment Merged.</p>

<h4>Set Up Production Environment</h4>

<ul>
<li><p>Make sure that your Procfile is set up to run Unicorn. (<a href="https://devcenter.heroku.com/articles/procfile">https://devcenter.heroku.com/articles/procfile</a>)</p></li>
<li><p>Make sure the PG Backups add-on is enabled.</p></li>
<li><p>Create a read-only Heroku Follower for your production database. If a Heroku database outage occurs, Heroku can use the follower to get your app back up and running faster. (<a href="https://devcenter.heroku.com/articles/heroku-postgres-follower-databases#high-availability-with-followers">https://devcenter.heroku.com/articles/heroku-postgres-follower-databases#high-availability-with-followers</a>)</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries/">Scaling Ruby on Rails by Caching Your Database Queries</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://www.codebeerstartups.com/2014/11/scaling-ruby-on-rails-by-caching-your-database-queries/">scaling-ruby-on-rails-by-caching-your-database-queries</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-28T08:34:54+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:34 am</span></time>
        
           | <a href="/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This article would help you to scaling your app with caching your database queries.</p>

<p>Its pretty good to use active-record in ruby on rails, relationships, find_by methods, where queries everything makes your life much more simpler as a developer but sooner or later your application becomes slow. At that time you need to work on optimizations. There are lot of work around for optimizations and one of them in caching the queries. The company I work for is StudyPad and we have a product ie splashmath and that has over 9 millions users using it across multiple platforms. The amount of traffic that we get is pretty huge and caching one of the thing that helped us to solve out scaling problems. Here is quick idea to cache your queries in memcache.</p>

<h4>Basic requirements</h4>

<p>There are few requirements for this. First is the dalli gem and memcache installed on your machine.</p>

<h4>Basic structure of the application.</h4>

<p>We have lot of static/seed data which change very less and the queries on those things are pretty high. So first thing to handle that static data.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skills &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>So in order to get skills for a grade, its pretty simple</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade = Grade.first
</span><span class='line'>skills = grade.skills</span></code></pre></td></tr></table></div></figure>


<p>Now for that matter every time we are fetching skills for a grade its gonna hit the database and get the results. So its time to get this query and its results cached.</p>

<p>Assuming you have configured dalli gem easily and you have memcached up and running. Here is a simple method to cache the results</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, id, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>So instead of fetching skills like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade.skills</span></code></pre></td></tr></table></div></figure>


<p>we are gonna get it like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade.cached_skills</span></code></pre></td></tr></table></div></figure>


<p>So whats its gonna do. Its gonna fetch the results first time from the database and store it in cache. Next time its gonna return the results from the cache. Note few things here</p>

<ul>
<li><p>Understand the pattern of the key. [self.class.name, id, :skills] is your key here.</p></li>
<li><p>Cache will expire in 240.hours. You can customize it as per your needs. Better keep a constant for this somewhere in your application.</p></li>
<li><p>In cached_skills methods we are keep records not the active-record relations that why we have to convert into array by using to_a else active-record-relation will be cached and database query will be executed.</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>skills.to_a</span></code></pre></td></tr></table></div></figure>


<h4>Expiring the cache.</h4>

<p>We are caching the query results but we are not expiring the results. What if some skill has changed. Grade object is not getting any notification for that, so cache is stale, we need to expire it. So we can write a after_commit hook for skill to expire its grade object’s cache</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># in skill model
</span><span class='line'>after_commit :flush_cache
</span><span class='line'>
</span><span class='line'>def flush_cache
</span><span class='line'>  Rails.cache.delete([self.grade.class.name, self.grade_id, :skills])
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>This is enough to make sure you cache is never stale. There is another way to handle the expiring cache. Lets see that.</p>

<h4>Another way</h4>

<p>We redefine the models like this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skills &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Note we have added touch: true in skills, and now we redefine our cached_skills method again:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now just caching this we don’t need to expire the cache manually, when ever skills get updated it will touch its parent object object grade, that will update its updated_at value and that specific cache will be never used, as key attribute updated_at has been changed.</p>

<h4>The problem with second approach</h4>

<p>But there is a problem. Assume you have 10 different has_many relationships for grade and you are caching it all, now everytime a skill has be changed all the other cache keys for grade relationships will be useless too. For example: Grade has_many topics</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skill &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Topic &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># In Grade model
</span><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>def cached_topics
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :topics], expires_in: 240.hours) {
</span><span class='line'>    topics.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now in this case changing any skill will make topics cache useless, but that’s not the case when you are trying to expire it manually. So both approach has pros and cons, first will ask you write more code and second expire cache more frequently. You have to make that choice as per your needs.</p>

<h4>What else?</h4>

<p>Using the same base principle you can cache lot of queries like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Grade.cached_find_by_id(1)
</span><span class='line'>Skill.first.cached_grade</span></code></pre></td></tr></table></div></figure>


<p>This approach helped us to reduce the load on RDS and make things pretty fast. I hope this will help you too. Let me know you feedback or some tips that made you system more faster</p>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/27/crytal-syntax-and-semantics-part-1/">Crytal: Syntax and Semantics Part 1</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://codeforfoods.net">codeforfoods</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-27T17:05:09+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>5:05 pm</span></time>
        
           | <a href="/blog/2014/11/27/crytal-syntax-and-semantics-part-1/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/27/crytal-syntax-and-semantics-part-1/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>1. Comments</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># This is a comment</span></code></pre></td></tr></table></div></figure>


<h3>2.Local variables</h3>

<p>Local variables start with lowercase letters. They are declared when you first assign them a value.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>name = "Crystal"
</span><span class='line'>age = 1</span></code></pre></td></tr></table></div></figure>


<p>Their type is inferred from their usage, not only from their initializer. In general, they are just value holders associated with the type that the programmer expects them to have according to their location and usage on the program.</p>

<p>For example, reassinging a variable with a different expression makes it have that expression’s type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var = "Hello"
</span><span class='line'># At this point 'var' is a String
</span><span class='line'>
</span><span class='line'>var = 1
</span><span class='line'># At this point 'var' is an Int32</span></code></pre></td></tr></table></div></figure>


<p>Underscores are allowed at the beginning of a variable name, but these names are reserved for the compiler, so their use is not recommended (and it also makes the code uglier to read).</p>

<h3>3.Global variables</h3>

<p>Global variables start with a dollar sign ($). They are declared when you first assign them a value.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$year = 2014</span></code></pre></td></tr></table></div></figure>


<p>Their type is the combined type of all expressions that were assigned to them. Additionally, if you program reads a global variable before it was ever assigned a value it will also have the Nil type.</p>

<h3>4.Assignment</h3>

<p>Assignment is done with the equal (=) character.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Assigns to a local variable
</span><span class='line'>local = 1
</span><span class='line'>
</span><span class='line'># Assigns to an instance variable
</span><span class='line'>@instance = 2
</span><span class='line'>
</span><span class='line'># Assigns to a class variable
</span><span class='line'>@@class = 3
</span><span class='line'>
</span><span class='line'># Assigns to a global variable
</span><span class='line'>$global = 4</span></code></pre></td></tr></table></div></figure>


<p>Some syntax sugar that contains the = character is available:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>local += 1  # same as: local = local + 1
</span><span class='line'>
</span><span class='line'># The above is valid with these operators:
</span><span class='line'># +, -, *, /, %, |, &, ^, **, &lt;&lt;, &gt;&gt;
</span><span class='line'>
</span><span class='line'>local ||= 1 # same as: local || (local = 1)
</span><span class='line'>local &&= 1 # same as: local && (local = 1)</span></code></pre></td></tr></table></div></figure>


<p>A method invocation that ends with = has syntax sugar:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># A setter
</span><span class='line'>person.name=("John")
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>person.name = "John"
</span><span class='line'>
</span><span class='line'># An indexed assignment
</span><span class='line'>objects.[]=(2, 3)
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>objects[2] = 3
</span><span class='line'>
</span><span class='line'># Not assignment-related, but also syntax sugar:
</span><span class='line'>objects.[](2, 3)
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>objects[2, 3]</span></code></pre></td></tr></table></div></figure>


<p>The = operator syntax sugar is also available to setters and indexers. Note that || and &amp;&amp; use the []? method to check for key prescence.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>person.age += 1        # same as: person.age = person.age + 1
</span><span class='line'>
</span><span class='line'>person.name ||= "John" # same as: person.name || (person.name = "John")
</span><span class='line'>person.name &&= "John" # same as: person.name && (person.name = "John")
</span><span class='line'>
</span><span class='line'>objects[1] += 2        # same as: objects[1] = objects[1] + 2
</span><span class='line'>
</span><span class='line'>objects[1] ||= 2       # same as: objects[1]? || (objects[1] = 2)
</span><span class='line'>objects[1] &&= 2       # same as: objects[1]? && (objects[1] = 2)</span></code></pre></td></tr></table></div></figure>


<p>I will present about control expressions in part 2.
Thanks!</p>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/27/crystal-getting-started/">Crystal: Getting Started</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://codeforfoods.net">codeforfoods</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-27T16:43:51+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:43 pm</span></time>
        
           | <a href="/blog/2014/11/27/crystal-getting-started/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/27/crystal-getting-started/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Introduction:</h3>

<p>Crystal is a programming language that resembles Ruby but compiles to native code and tries to be much more efficient, at the cost of disallowing certain dynamic aspects of Ruby.</p>

<h3>Installation</h3>

<h4>1. On Debian and Ubuntu</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl http://dist.crystal-lang.org/apt/setup.sh | sudo bash
</span><span class='line'>apt-key adv --keyserver keys.gnupg.net --recv-keys 09617FD37CC06B54
</span><span class='line'>echo "deb http://dist.crystal-lang.org/apt crystal main" &gt; /etc/apt/sources.list.d/crystal.list
</span><span class='line'>sudo apt-get install crystal</span></code></pre></td></tr></table></div></figure>


<h4>2. On Mac OSX using Homebrew</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew tap manastech/crystal
</span><span class='line'>brew install crystal</span></code></pre></td></tr></table></div></figure>


<h3>Hello World</h3>

<p>This is the simplest way to write the Hello World program in Crystal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>puts "Hello World"</span></code></pre></td></tr></table></div></figure>


<p>First create a file hello.cr containing your code. Then type in the console:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod +x hello.cr
</span><span class='line'>crystal hello.cr</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s all! Hope you guys love it :D
I will have another post about syntax and semantics :)
Thanks</p>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/19/rails-get-youtube-download-link/">[Rails] Get Youtube Download Link</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="https://github.com/rb2k/viddl-rb">viddl-rb</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-19T08:39:56+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:39 am</span></time>
        
           | <a href="/blog/2014/11/19/rails-get-youtube-download-link/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/19/rails-get-youtube-download-link/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Installation:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install viddl-rb
</span></code></pre></td></tr></table></div></figure>


<h3>Usage:</h3>

<p>Download a video: viddl-rb <a href="http://www.youtube.com/watch?v=QH2-TGUlwu4">http://www.youtube.com/watch?v=QH2-TGUlwu4</a>
<br>
Viddl-rb supports the following command line options:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-e, --extract-audio              Extract the audio track of the download to a separate file
</span><span class='line'>-a, --abort-on-failure           Abort if one of the videos in a list fails to download
</span><span class='line'>-u, --url-only                   Just display the download url without downloading the file.
</span><span class='line'>-t, --title-only                 Just display the title without downloading the file.
</span><span class='line'>-f, --filter REGEX               Filters a video playlist according to the regex (Youtube only right now)
</span><span class='line'>-s, --save-dir DIRECTORY         Specifies the directory where videos should be saved
</span><span class='line'>-d, --downloader TOOL            Specifies the tool to download with. Supports 'wget', 'curl', 'aria2c' and 'net-http'
</span><span class='line'>-q, --quality QUALITY            Specifies the video format and resolution in the following way: width:height:format (e.g. 1280:720:mp4)
</span><span class='line'>                                 The width, height and format may be omitted with a *.
</span><span class='line'>                                 For example, to match any quality with a height of 720 pixels in any format specify --quality *:720:*
</span><span class='line'>-h, --help                       Displays the help screen</span></code></pre></td></tr></table></div></figure>


<h3>Library Usage:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>require 'viddl-rb'
</span><span class='line'>
</span><span class='line'>download_urls = ViddlRb.get_urls("http://www.youtube.com/watch?v=QH2-TGUlwu4")
</span><span class='line'>download_urls.first     # =&gt; "http://o-o.preferred.arn06s04.v3.lscac ..."</span></code></pre></td></tr></table></div></figure>


<p>The ViddlRb module has the following module public methods:</p>

<h4>get_urls_names(url)</h4>

<p> &ndash; Returns an array of one or more hashes that has the keys :url which points to the download url and :name which points to the name (which is a filename safe version of the video title with a file extension). Returns nil if the url is not recognized by any plugins.</p>

<h4>get_urls_exts(url)</h4>

<p>&ndash; Same as get_urls_names but with just the file extension (for example &ldquo;.mp4&rdquo;) instead of the full filename, and the :name key is replaced with :ext. Returns nil if the url is not recognized by any plugins.</p>

<h4>get_urls(url)</h4>

<p>&ndash; Returns an array of download urls for the specified video url. Returns nil if the url is not recognized by any plugins.</p>

<h4>get_names(url)</h4>

<p>&ndash; Returns an array of filenames for the specified video url. Returns nil if the url is not recognized by any plugins.</p>

<h4>io=(io_object)</h4>

<p>&ndash; By default all plugin output to stdout will be suppressed when the library is used. If you are interested in the output of a plugin, you can set an IO object that will receive all plugin output using this method.</p>

<h3>Requirements:</h3>

<blockquote><ul>
<li>curl/wget/aria2c or the progress bar gem</li>
<li>Nokogiri</li>
<li>ffmpeg if you want to extract audio tracks from the videos</li>
</ul>
</blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/18/let-flood-test-your-site-with-flood-dot-io/">Let Flood Test Your Site With Flood.io</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="https://flood.io/help/floods/getting_started_using_jmeter">flood.io</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-18T23:45:08+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:45 pm</span></time>
        
           | <a href="/blog/2014/11/18/let-flood-test-your-site-with-flood-dot-io/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/18/let-flood-test-your-site-with-flood-dot-io/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Flood IO is a cloud based load testing platform for <a href="https://flood.io/help/floods/jmeter.apache.org">JMeter</a> and <a href="https://flood.io/help/floods/gatling-tool.org">Gatling</a> that lets you scale out your tests across the globe using our on demand or your own hosted AWS infrastructure. In this article we introduce you to JMeter and how to run your first Flood test.</p>

<p>In this article, I&rsquo;d like to use <code>JMeter</code> as testing scripts</p>

<h3>Getting JMeter</h3>

<p>JMeter can be downloaded <a href="http://jmeter.apache.org/download_jmeter.cgi">here</a> and typically you can start JMeter using the <code>jmeter.cmd</code> or <code>jmeter.sh</code> scripts located in the downloaded archive <code>bin</code> directory.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/jmeter-example.jmx_UserstimkoopmansGitfloodflood-sitepublicjmeter-example.jmx_-_Apache_JMeter_2.11_r1554548_2014-10-06_17-37-40.jpg"></p>

<h3>Creating a Test Plan</h3>

<p>Once you have created a <a href="https://flood.io/jmeter-example.jmx">basic test plan</a> and saved it locally as a <code>.jmx</code> file, you can upload this to Flood IO to create your first Flood test.</p>

<h3>Creating a Flood Test</h3>

<p>After you login to Flood IO you can click the &ldquo;+&rdquo; icon or from your <a href="https://flood.io/dashboard/floods">Floods dashboard</a> you can click the &ldquo;Create Flood&rdquo; button to create a new Flood.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-36-50.jpg"></p>

<p>In the new Flood form, add the <code>.jmx</code> test plan you created using JMeter to the Files input and select a Grid to run your Flood test on. You can optionally set the &ldquo;Name&rdquo; or &ldquo;Tags&rdquo; to help identify the test in your dashboard.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-49-17.jpg"></p>

<h3>Start your Flood Test</h3>

<p>Read about more [advanced settings] or simply click the &ldquo;Start Flood&rdquo; button to launch your test.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-53-22.jpg"></p>

<p>You will be redirected to a Flood report which will show you results in real time from the test you just executed on the chosen Grid.</p>

<h3>The results in real time</h3>

<ul>
<li>Summary about AVG Response Time, Concurence Users and Transaction Rate</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-cbQyegUkAt8/VGt77yF3o_I/AAAAAAAAADE/zIceQUvDRnY/w957-h199-no/Flood_IO.png"></p>

<ul>
<li>Summary report by chart</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-LdsF3ANppGY/VGt8J5PJa3I/AAAAAAAAADM/dN75wBnBQ7M/w958-h404-no/Flood_IO.png"></p>

<ul>
<li>Detail transaction</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-NLjHvr3TwME/VGt8m92lEoI/AAAAAAAAADc/9o8vDRsEzBE/w957-h384-no/Flood_IO.png"></p>

<ul>
<li>You can trace your http connection</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/ItYy1EO4CTEt8fFFxFNKxkwdgR9uey33boD5RZ_MyA=w400-h207-p-no"></p>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/07/php-cooking/">Php-cooking</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://codeforfoods.net">codeforfoods</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-07T11:03:51+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:03 am</span></time>
        
           | <a href="/blog/2014/11/07/php-cooking/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/07/php-cooking/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This article would help you to setup Chef for PHP stuff step by step</p>

<h4>Step 1 - Install required tools</h4>

<ul>
<li>Ruby</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.ruby-lang.org/en/installation/</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Knife Solo</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install knife-solo</span></code></pre></td></tr></table></div></figure>


<ul>
<li>librarian-chef</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install librarian-chef</span></code></pre></td></tr></table></div></figure>


<h4>Step 2 - Setup</h4>

<ul>
<li><p>Create new directory for your project</p>

<pre><code>  mkdir /your-path/php-cooking
</code></pre></li>
<li><p>Move to php-cooking folder</p>

<pre><code>  cd /your-path/php-cooking
</code></pre></li>
<li><p>Initialize librarian-chef</p>

<pre><code>  librarian-chef init
</code></pre></li>
<li><p>Initialize knife solo</p>

<pre><code>  knife solo init .
</code></pre></li>
</ul>


<p>After initialazing, you should see the folder structure like below (notice that I added the <code>www</code> folder for containing the php&rsquo;s web app )</p>

<p><img src="https://lh5.googleusercontent.com/-e9FKrxVfB50/VFxCHoV-CaI/AAAAAAAAABg/aBM_nLe5EMY/s418/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>Ok, now is time for adding the necessary cookbooks to <code>Cheffile</code></p>

<figure class='code'><figcaption><span>Cheffile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'><span class="c1">#^syntax detection</span>
</span><span class='line'>
</span><span class='line'><span class="n">site</span> <span class="s1">&#39;https://supermarket.getchef.com/api/v1&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;php&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.4.6&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s2">&quot;php55&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/aporat/php55-cookbook&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;php-mcrypt&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;apache2&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;= 1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 5.5.2&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;composer&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0.5&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is including <code>php</code>, <code>apache</code>, <code>mysql</code> and <code>composer</code></p>

<p>Next we will need to install all cookbooks which be specified in <code>Cheffile</code></p>

<pre><code>    librarian-chef install
</code></pre>

<p>After installing, you should see the cookbooks folder as below</p>

<p><img src="https://lh4.googleusercontent.com/-zg-x4_s1JLw/VFxCwKlTkfI/AAAAAAAAACE/sVvPi3G5hGA/s492/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>That&rsquo;s good so far, now we should setup <code>roles</code>, <code>enviroments</code> and <code>owner cookbooks</code> for install the web server and deploy your application to web server.</p>

<ul>
<li>Setup <code>dev environent</code>: create a file called <code>dev.json</code> in enviroment folder</li>
</ul>


<p><img src="https://lh4.googleusercontent.com/-zg-x4_s1JLw/VFxCwKlTkfI/AAAAAAAAACE/sVvPi3G5hGA/s492/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<figure class='code'><figcaption><span>dev.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;apache2&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;listen_ports&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;80&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;443&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;ext_conf_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/php5/apache2/conf.d&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;root_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;server_name&quot;</span><span class="p">:</span> <span class="s2">&quot;phpdev.codeforfoods.net&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Environment&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;environment&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Setup <code>myapp role</code> and <code>myapp deploy role</code>: create 2 file <code>myapp.json</code> and <code>myapp_deploy.json</code> in roles folder</li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-yoM7_7UiHBY/VFxCYAUZpJI/AAAAAAAAABs/xbd3d4fabn8/s184/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<figure class='code'><figcaption><span>myapp.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myapp&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The role for app servers&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;override_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;run_list&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>          <span class="s2">&quot;recipe[apt]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[build-essential]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[composer]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>      <span class="nt">&quot;env_run_lists&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nt">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>              <span class="s2">&quot;recipe[apt]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[build-essential]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[composer]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>myapp_deploy.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myapp_deploy&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The role for app servers&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;override_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;run_list&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>      <span class="nt">&quot;env_run_lists&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nt">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Create a owner cookbook called <code>myapp</code>, this should be store in <code>site-cookbooks</code> folder</p>

<pre><code>      knife cookbook create myapp
</code></pre></li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-7wagSNwnOWI/VFxESOwCZCI/AAAAAAAAACs/Xe7vU8MlycA/s415/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>Notes:</p>

<p>1) 2 recipes, one for myapp default and other for myapp deploy</p>

<figure class='code'><figcaption><span>defaut.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;mysql::client&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;mysql::server&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php55&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_mysql&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_curl&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_memcache&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2::mod_php5&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2::mod_expires&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php-mcrypt&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># disble default site.</span>
</span><span class='line'><span class="n">apache_site</span> <span class="s2">&quot;default&quot;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">enable</span> <span class="kp">false</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>deploy.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># grant permission for webroot</span>
</span><span class='line'><span class="n">directory</span> <span class="n">node</span><span class="o">[</span><span class="s2">&quot;myapp&quot;</span><span class="o">][</span><span class="s2">&quot;root_path&quot;</span><span class="o">]</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">owner</span> <span class="s2">&quot;root&quot;</span>
</span><span class='line'>  <span class="n">group</span> <span class="s2">&quot;root&quot;</span>
</span><span class='line'>  <span class="n">mode</span> <span class="s2">&quot;0755&quot;</span>
</span><span class='line'>  <span class="n">action</span> <span class="ss">:create</span>
</span><span class='line'>  <span class="n">recursive</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># reading the data bag</span>
</span><span class='line'><span class="c1">#secrets = Chef::EncryptedDataBagItem.load(&quot;secrets&quot;, &quot;myapp&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span> <span class="o">==</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>      <span class="c1"># enable kizang-api site.</span>
</span><span class='line'>      <span class="n">web_app</span> <span class="s1">&#39;myapp&#39;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">template</span> <span class="s1">&#39;site.conf.erb&#39;</span>
</span><span class='line'>      <span class="n">docroot</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;myapp&#39;</span><span class="o">][</span><span class="s1">&#39;root_path&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">server_name</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;myapp&#39;</span><span class="o">][</span><span class="s1">&#39;server_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>2) the Apache configuration template file</p>

<figure class='code'><figcaption><span>site.conf.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="no">VirtualHost</span> <span class="o">*</span><span class="p">:</span><span class="mi">80</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="no">ServerName</span> <span class="o">&lt;</span><span class="sx">%= @params[:server_name] %&gt;</span>
</span><span class='line'><span class="sx"> DocumentRoot &lt;%=</span> <span class="vi">@params</span><span class="o">[</span><span class="ss">:docroot</span><span class="o">]</span> <span class="sx">%&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx"> &lt;Directory &lt;%= @params[:docroot] %&gt;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="no">Options</span> <span class="no">FollowSymLinks</span>
</span><span class='line'>      <span class="no">AllowOverride</span> <span class="no">All</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="sx">% if </span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;apache&#39;</span><span class="o">][</span><span class="s1">&#39;version&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;2.4&#39;</span> <span class="o">-</span><span class="sx">%&gt;</span>
</span><span class='line'><span class="sx">             Require all granted</span>
</span><span class='line'><span class="sx">         &lt;% elsif node[&#39;apache&#39;][&#39;version&#39;] == &#39;2.2&#39; -%&gt;</span>
</span><span class='line'>          <span class="no">Order</span> <span class="n">allow</span><span class="p">,</span><span class="n">deny</span>
</span><span class='line'>          <span class="no">Allow</span> <span class="n">from</span> <span class="n">all</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="sx">% end </span><span class="o">-</span><span class="sx">%&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx">     RewriteEngine On</span>
</span><span class='line'><span class="sx">     RewriteBase /</span>
</span><span class='line'><span class="sx">     RewriteRule ^index\.php$ - [L]</span>
</span><span class='line'><span class="sx">     RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="sx">     RewriteCond %{REQUEST_FILENAME} !-d</span>
</span><span class='line'><span class="sx">     RewriteRule . /index.php [L]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sx"> &lt;/Directory&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="no">Directory</span> <span class="sr">/&gt;</span>
</span><span class='line'><span class="sr">     Options FollowSymLinks</span>
</span><span class='line'><span class="sr">     AllowOverride None</span>
</span><span class='line'><span class="sr"> &lt;/</span><span class="no">Directory</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="no">ErrorLog</span> <span class="err">$</span><span class="p">{</span><span class="no">APACHE_LOG_DIR</span><span class="p">}</span><span class="o">/</span><span class="n">myapp</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">log</span>
</span><span class='line'>  <span class="c1"># Possible values include: debug, info, notice, warn, error, crit,</span>
</span><span class='line'>  <span class="c1"># alert, emerg.</span>
</span><span class='line'>  <span class="no">LogLevel</span> <span class="nb">warn</span>
</span><span class='line'>  <span class="no">CustomLog</span> <span class="err">$</span><span class="p">{</span><span class="no">APACHE_LOG_DIR</span><span class="p">}</span><span class="o">/</span><span class="n">myapp</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">log</span> <span class="n">combined</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/VirtualHost&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Step 3 - Setup vagrant for create development environment</h4>

<p>Ok! Almost Chef setting up is done, now you should create a <code>Vagrantfile</code> and use chef-solo as provision for install development server</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'>  <span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
</span><span class='line'>  <span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span class='line'>  <span class="no">CHEF_PATH</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span class='line'>  <span class="no">SYNC_PATH</span> <span class="o">=</span> <span class="s2">&quot;./www&quot;</span>
</span><span class='line'>  <span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;ubuntu14.04&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://oss-binaries.phusionpassenger.com/vagrant/boxes/latest/ubuntu-14.04-amd64-vbox.box&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.34.100&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;devphp.congdang.com&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>   <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnshostresolver1&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnsproxy1&quot;</span><span class="p">,</span>        <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--memory&quot;</span><span class="p">,</span>              <span class="s2">&quot;1024&quot;</span> <span class="o">]</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="s1">&#39;11.16.0&#39;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">cookbooks_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/cookbooks&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/site-cookbooks&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">environments_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/environments&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">roles_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/roles&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">add_role</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="no">SYNC_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:owner</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:mount_options</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;dmode=777&#39;</span><span class="p">,</span><span class="s1">&#39;fmode=777&#39;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that, I used <code>www</code> vagrant&rsquo;s sync folder. That means you should store your web application in <code>www</code> folder. In this article I just created a simple php file in that folder</p>

<figure class='code'><figcaption><span>index.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>  <span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>      <span class="k">echo</span> <span class="s2">&quot;Hello PHP world!!!!&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally you need to run vagrant and check the site on the browser</p>

<pre><code>        vagrant up
</code></pre>

<p>Once vagrant upping is done, you can check your application on browser</p>

<pre><code>        http://192.168.34.100
</code></pre>

<h4>Conclusion</h4>

<p>You can pull all code from my github</p>

<figure class='code'><figcaption><span>repository on gihub</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>https://github.com/code-for-food/php-cooking.git <span class="c"># fork from github</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this Chef, I&rsquo;ve setup <code>mysql</code> as well but I just only used <code>php</code> and <code>apache</code>. You can add more code in <code>defaul.rb</code> recipe for using <code>mysql</code> for your project. If you have any question, you can drop an email to me <a href="mailto:code.for.food.14@gmail.com">codeforfoods</a>.</p>

<p>Thanks for your reading!!!</p>
</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/06/how-to-switch-careers/">How to Switch Careers</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="http://www.wikihow.com/Switch-Careers">wikihow</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-06T11:12:00+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>11:12 am</span></time>
        
           | <a href="/blog/2014/11/06/how-to-switch-careers/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/06/how-to-switch-careers/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Making a big career change is never easy, especially if you&rsquo;ve got kids to support, a mortgage to pay, and a car to worry about. People will tell you you&rsquo;ve got it great where you are and that the grass is always greener on the other side. What they don&rsquo;t know is what&rsquo;s best for you. Switching careers doesn&rsquo;t have to be the daunting process everyone makes it out to be if you are organized, practical, and thorough with your research.</p>

<h4>Method 1 of 5: What Would You Rather Be Doing?</h4>

<p><img src="http://www.wikihow.com/images/2/25/Switch-Careers-Step-1.jpg"></p>

<p><strong>1. Tackle the golden question</strong></p>

<p>If you had all the money in the world, what would you be doing with yourself? Don&rsquo;t hold back. This is brainstorming time. Make a list of all the things you&rsquo;d rather be doing with your time. Your first few answers will probably be something like: Take a tropical vacation, spend more time with the kids, etc. But push your thinking beyond that. Ask yourself if you are content with stringent working hours, accounting to higher authorities, etc. If this is what you don&rsquo;t like, then strive for a self-actualizing job that gives you exactly what you desire or hope to achieve.</p>

<p><strong>2. Consider careers that interest you.</strong></p>

<p>You might have studied accounting at college for the sake of job security and financial certainty. But all the time, perhaps you really wanted to be a park ranger or a freelance troubleshooter. Think back to what once motivated you when you were younger––you will often find the kernel of the things that still motivate and thrill you there.</p>

<ul>
<li>Write a list of the things you loved to do once and the career ideas you had.</li>
<li>Add down the ideas for preferred careers that you actually have now. Don&rsquo;t hold back for such reasons as &ldquo;lack training&rdquo; or &ldquo;no resources to risk it&rdquo;. At this stage, write down the career paths you&rsquo;d really rather be following.</li>
</ul>


<h4>Method 2 of 5: Working Out What Else You Can Do</h4>

<p><img src="http://www.wikihow.com/images/3/36/Switch-Careers-Step-2.jpg"></p>

<p><strong>1. Evaluate your skills and talents.</strong>
Ask yourself: What am I good at? What do I most enjoy doing? Write down every skill you&rsquo;re capable of. Don&rsquo;t be shy. Does your current job give you satisfaction and utilize all your potential?</p>

<p><img src="http://www.wikihow.com/images/a/ac/Switch-Careers-Step-3.jpg"></p>

<p><strong>2. Identify transferable skills.</strong>
After having listed all known skills and talents, identify what skills will best transfer over into the new line of work you&rsquo;re hoping to change to. The longer the list, the easier the transition.</p>

<ul>
<li>If you have only a few or no transferable skills, do not be discouraged. New skills can be easily learned, while old skills can act as the foundation blocks.</li>
<li>Other life experiences can also make this transition easy––remain conscious of the basic life skills that have already been acquired and avoid discounting them. Give yourself a boost and some credit.</li>
<li>Pursue your passion to find happiness. Is there a passion outside of your work that has brought you a range of skills that you might be able to use to bolster your transition case?</li>
</ul>


<p><img src="http://www.wikihow.com/images/e/eb/Switch-Careers-Step-4.jpg"></p>

<p><strong>3. Think of jobs that allow you to do what you really want to do, at least in some form.</strong>
 In what ways will you be able to apply your skills and talents every day? Be creative and open-minded. Focus on what your inner feelings guide you to do.</p>

<p><img src="http://www.wikihow.com/images/e/e2/Switch-Careers-Step-7.jpg"></p>

<p><strong>4. Make a list of everything you want in your new job.</strong> make one of everything you don&rsquo;t want, such as revisiting tedious aspects of your current job. Having this dual list of preferences to guide you will make it easier to check off the jobs that fit and delete the ones that don&rsquo;t; the list helps you to be more discerning and less ready to jump into the same situation.</p>

<ul>
<li><p>Be prepared to work gradually towards your needs and wants; steady accomplishments will make the career transition less risky and more likely to work out for you.</p></li>
<li><p>The list helps you to listen to your gut reactions and not ignore warnings that something isn&rsquo;t a good match for you. You are changing careers precisely because you want to remove yourself from the warnings, so heed that feeling if it arises.</p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- codeforfoods-footer -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-4773765193389725"
     data-ad-slot="7439101090"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/11/06/7-characteristics-that-separate-a-boss-from-a-leader/">7 Characteristics That Separate a Boss From a Leader</a></h1>
    
    
  



  


<span class="byline author vcard"> * source: <span class="fn">



	<a href="https://www.facebook.com/ArchiDesiign/posts/414950071993587">Internet</a>
	

</span></span>
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-06T08:11:12+07:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:11 am</span></time>
        
           | <a href="/blog/2014/11/06/7-characteristics-that-separate-a-boss-from-a-leader/#disqus_thread"
             data-disqus-identifier="http://codeforfoods.net/blog/2014/11/06/7-characteristics-that-separate-a-boss-from-a-leader/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While a leader can be a boss, not every boss is a leader. Although leaders and</p>

<p>While a boss is mostly concerned with outcomes, a leader feels responsible for the process of that outcome and the people who see it out. Check out some major points that distinguish a leader from a boss:</p>

<h4>1. Leaders lead rather than rule.</h4>

<p>Throughout history, the best chiefs headed their troops in fights or campaigns or whatever. The troops were not afraid because their leader was right there with them. Leaders are there to lead the team forward and to move together.</p>

<p><img src="https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/s960x960/10750009_414949625326965_7306927192227304603_o.jpg"></p>

<h4>2. Leaders listen and speak rather than command.</h4>

<p>Bosses tend to give orders; they need their employees to listen and to obey. However, leaders always listen to the opinions of their colleagues and regard them as important.</p>

<p><img src="https://scontent-a-sin.xx.fbcdn.net/hphotos-xpa1/v/t1.0-9/1901348_414949695326958_1617544880402520783_n.jpg?oh=f1cd8754b1f4cb16cf53b4270c3087d8&oe=54EDAB49"></p>

<p>Leaders are always ready for advising, discussion and any feedback an employee has to offer. This reciprocity makes any individual employee feel stronger and gives him or her confidence to follow the leader.</p>

<h4>3. Leaders motivate rather than terrify.</h4>

<p>While working on projects, people have their ups and downs. Through this roller coaster, bosses are more likely to intimidate into action while leaders will motivate to action.</p>

<p><img src="https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-xpa1/v/t1.0-9/10734090_414949795326948_3416275930774179251_n.jpg?oh=810fc4bbc2c48acc50901f0ace834780&oe=54D510A4&__gda__=1425216796_844fce8da41177cca8e81b7e8420446f"></p>

<p>One of the best things about leaders is that they offer empathy and prepare a group for the tasks at hand. This is very important, seeing as whenever colleagues are not prepared for certain duties, leaders are there to support, teach and back them up. Leaders know that each employee is on the team for a reason and they have faith in every concerted effort.</p>

<h4>4. Leaders teach and learn rather than expect and ignore.</h4>

<p>A true leader is the person who has self-esteem, but who is not arrogant nor embarrassed to learn from those with lower titles. They know that it is never late to learn more.</p>

<p><img src="https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/10390082_414949875326940_5418551154960633658_n.jpg?oh=29e60279326157a42885c54f67bd5089&oe=54F60741&__gda__=1423894173_22dbfb4334e5d1b501a5a56f149bd558"></p>

<p>This explains the tendency of leaders to always pay attention to their colleagues, knowing there is always more to learn from them. Moreover, leaders are not only takers, but givers, as well. A good leader is not greedy for sharing knowledge and experience with someone else; instead, the leader teaches and nurtures new professionals.</p>

<h4>5. Leaders take part rather than stay aside.</h4>

<p>While bosses choose to stay aside in the job, leaders take initiative. They watch over the progress of work, make adjustments where necessary and aid team members. They choose to be a part of the team rather than bossing the team around.</p>

<h4>6. Leaders reprimand rather than scold or shout.</h4>

<p>When necessary, a leader offers constructive criticism. However, a leader never scolds or shouts at any individual, especially in public. They do understand that they are dealing with people and no one has right to humiliate others. Rather, the leader talks to the person individually and without any spike in temper.</p>

<p><img src="https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xaf1/v/t1.0-9/10302103_414949405326987_7411112196686359758_n.jpg?oh=6cf1816ef68d247e18d323ce9e567143&oe=54E9D98C&__gda__=1423805501_e5f258925a4f00bf50521f72097a608f"></p>

<h4>7. Leaders establish equal relationships.</h4>

<p>Anyone who has ever worked on a team knows what it feels like when the manager chooses his favorites and non-favorites. It always causes stress and tension among team members which comprises productivity.</p>

<p><img src="https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-xfp1/v/t1.0-9/10712864_414949598660301_9088054071801414512_n.jpg?oh=fae2d01837a2ae2a3000f50907882919&oe=54D5DB78&__gda__=1424870129_0066f0dd1c3aa8f1ef57f9abef7cba6d"></p>

<p>A good leader tries to treat everyone equally and to not allow personal preferences affect the team dynamic.</p>

<p>During your life, you will face two kinds of managers: leaders and bosses. It does not matter how high the position of these individuals; bossy people are more likely to fail while those who lead will succeed.</p>

<p>Maybe the things I mentioned above do not make any sense for you now, but eventually, you will experience the difference and garner a greater understanding of which manager you prefer for your own professional life.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="gravatar-section first odd">
  <h1>We are</h1>
  <div class="bio">
    <div class="messages">
      <p><a href="https://codeforfoods.net"><strong>@CodeForFoods</strong></a></p>
      <p>we are web developers</p>
      <p>in Viet Name</p>
      <a href="/about-us">More</a>
    </div>
  </div>
  <div class="gravatar">
    <img src="https://avatars3.githubusercontent.com/u/9510217?v=2&s=400" alt="Github avarta of code for food" title="Github avarta of code for food">
  </div>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/12/01/work-with-chef-server/">Work With Chef Server</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/28/rails-protocol/">Rails Protocol</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries/">Scaling Ruby on Rails by Caching Your Database Queries</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/27/crytal-syntax-and-semantics-part-1/">Crytal: Syntax and Semantics Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/27/crystal-getting-started/">Crystal: Getting Started</a>
      </li>
    
  </ul>
</section>
<section>
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- codeforfoods -->
	<ins class="adsbygoogle"
	     style="display:inline-block;width:260px;height:260px"
	     data-ad-client="ca-pub-4773765193389725"
	     data-ad-slot="3148502299"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</section>
<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/codeforfoods?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/codeforfoods">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/code.for.food.14?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - codeforfoods -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codeforfoods';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=288370854684839&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
