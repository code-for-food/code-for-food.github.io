<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Chicken's Blog ^_^]]></title>
  <link href="http://codeforfoods.net/atom.xml" rel="self"/>
  <link href="http://codeforfoods.net/"/>
  <updated>2014-12-04T17:04:27+07:00</updated>
  <id>http://codeforfoods.net/</id>
  <author>
    <name><![CDATA[codeforfoods]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Crytal: Syntax and Semantics Part 2]]></title>
    <link href="http://codeforfoods.net/blog/2014/12/04/crytal-syntax-and-semantics-part-2/"/>
    <updated>2014-12-04T16:46:54+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/12/04/crytal-syntax-and-semantics-part-2</id>
    <content type="html"><![CDATA[<h3>5.Control expressions</h3>

<h4>5.1.Truthy and falsey values</h4>

<p>A truthy value is a value that is considered true for an if, unless, while or until guard. A falsey value is a value that is considered false in those places.</p>

<p>The only falsey values are nil, false and null pointers (pointers whose memory address is zero). Any other value is truthy.</p>

<h4>5.2.if</h4>

<p>An if evaluates the then branch if its condition is truthy, and evaluates the else branch, if there’s any, otherwise.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>a = 1
</span><span class='line'>if a &gt; 0
</span><span class='line'>  a = 10
</span><span class='line'>end
</span><span class='line'>a #=&gt; 10
</span><span class='line'>
</span><span class='line'>b = 1
</span><span class='line'>if b &gt; 2
</span><span class='line'>  b = 10
</span><span class='line'>else
</span><span class='line'>  b = 20
</span><span class='line'>end
</span><span class='line'>b #=&gt; 20</span></code></pre></td></tr></table></div></figure>


<p>To write a chain of if-else-if you use <em>elsif</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if some_condition
</span><span class='line'>  do_something
</span><span class='line'>elsif some_other_condition
</span><span class='line'>  do_something_else
</span><span class='line'>else
</span><span class='line'>  do_that
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>After an <em>if</em>, a variable’s type depends on the type of the expressions used in both branches.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>a = 1
</span><span class='line'>if some_condition
</span><span class='line'>  a = "hello"
</span><span class='line'>else
</span><span class='line'>  a = true
</span><span class='line'>end
</span><span class='line'># a :: String | Bool
</span><span class='line'>
</span><span class='line'>b = 1
</span><span class='line'>if some_condition
</span><span class='line'>  b = "hello"
</span><span class='line'>end
</span><span class='line'># b :: Int32 | String
</span><span class='line'>
</span><span class='line'>if some_condition
</span><span class='line'>  c = 1
</span><span class='line'>else
</span><span class='line'>  c = "hello"
</span><span class='line'>end
</span><span class='line'># c :: Int32 | String
</span><span class='line'>
</span><span class='line'>if some_condition
</span><span class='line'>  d = 1
</span><span class='line'>end
</span><span class='line'># d :: Int32 | Nil</span></code></pre></td></tr></table></div></figure>


<p>Note that if a variable is declared inside one of the branches but not in the other one, at the end of the <em>if</em> it will also contain the <em>Nil</em> type.</p>

<p>Inside an <em>if</em>&rsquo;s branch the type of a variable is the one it got assigned in that branch, or the one that it had before the branch if it was not reassigned:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>a = 1
</span><span class='line'>if some_condition
</span><span class='line'>  a = "hello"
</span><span class='line'>  # a :: String
</span><span class='line'>  a.length
</span><span class='line'>end
</span><span class='line'># a :: String | Int32</span></code></pre></td></tr></table></div></figure>


<p>That is, a variable’s type is the type of the last expression(s) assigned to it.</p>

<p>If one of the branches never reaches past the end of an <em>if</em>, like in the case of a <em>return</em>, <em>next</em>, <em>break</em> or <em>raise</em>, that type is not considered at the end of the <em>if</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if some_condition
</span><span class='line'>  e = 1
</span><span class='line'>else
</span><span class='line'>  e = "hello"
</span><span class='line'>  # e :: String
</span><span class='line'>  return
</span><span class='line'>end
</span><span class='line'># e :: Int32</span></code></pre></td></tr></table></div></figure>


<h4>5.3.unless</h4>

<p>An <em>unless</em> evaluates the then branch if its condition is falsey, and evaluates the <em>else branch</em>, if there’s any, otherwise. That is, it behaves in the opposite way of an <em>if</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>unless some_condition
</span><span class='line'>  then_expression
</span><span class='line'>else
</span><span class='line'>  else_expression
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>if some_condition
</span><span class='line'>  else_expression
</span><span class='line'>else
</span><span class='line'>  then_expression
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># Can also be written as a suffix
</span><span class='line'>close_door unless door_closed?</span></code></pre></td></tr></table></div></figure>


<h4>5.4.case</h4>

<p>A <em>case</em> is a control expression that allows a sort of pattern matching. It allows writing a chain of if-else-if with a small change in semantic and some more powerful constructs.</p>

<p>In its basic form, it allows matching a value against other values:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ase exp
</span><span class='line'>when value1, value2
</span><span class='line'>  do_something
</span><span class='line'>when value3
</span><span class='line'>  do_something_else
</span><span class='line'>else
</span><span class='line'>  do_another_thing
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>tmp = exp
</span><span class='line'>if value1 === tmp || value2 === tmp
</span><span class='line'>  do_something
</span><span class='line'>elsif value3 === tmp
</span><span class='line'>  do_something_else
</span><span class='line'>else
</span><span class='line'>  do_another_thing
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Note that <em>===</em> is used for comparing an expression against a <em>case</em>&rsquo;s value.</p>

<p>If a <em>when</em>&rsquo;s expression is a type, <em>is_a</em>? is used. Additionally, if the case expression is a variable or a variable assignment the type of the variable is restricted:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>case var
</span><span class='line'>when String
</span><span class='line'>  # var :: String
</span><span class='line'>  do_something
</span><span class='line'>when Int32
</span><span class='line'>  # var :: Int32
</span><span class='line'>  do_something_else
</span><span class='line'>else
</span><span class='line'>  # here var is neither a String nor an Int32
</span><span class='line'>  do_another_thing
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>if var.is_a?(String)
</span><span class='line'>  do_something
</span><span class='line'>elsif var.is_a?(Int32)
</span><span class='line'>  do_something_else
</span><span class='line'>else
</span><span class='line'>  do_another_thing
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>You can invoke a method on the <em>case</em>&rsquo;s expression in a <em>when</em> by using the implicit-object syntax:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>case num
</span><span class='line'>when .even?
</span><span class='line'>  do_something
</span><span class='line'>when .odd?
</span><span class='line'>  do_something_else
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>tmp = num
</span><span class='line'>if tmp.even?
</span><span class='line'>  do_something
</span><span class='line'>elsif tmp.odd?
</span><span class='line'>  do_something_else
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Finally, you can ommit the <em>case</em>&rsquo;s value:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>case
</span><span class='line'>when cond1, cond2
</span><span class='line'>  do_something
</span><span class='line'>when cond3
</span><span class='line'>  do_something_else
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>if cond1 || cond2
</span><span class='line'>  do_something
</span><span class='line'>elsif cond3
</span><span class='line'>  do_something_else
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>This sometimes leads to code that is more natural to read.</p>

<h4>5.5.while</h4>

<p>A <em>while</em> executes its body as long as its condition is truthy</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>while some_condition
</span><span class='line'>  do_this
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>In the above form, the condition is first tested and, if truthy, the body is executed. That is, the body might never be executed.</p>

<p>To execute the body at least once and then continue executing it while the condition is truthy, write the while as a prefix:v</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>do_this while some_condition</span></code></pre></td></tr></table></div></figure>


<p>If you need to execute multiple expressions, group them between <em>begin</em> and <em>end</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>begin
</span><span class='line'>  do_this
</span><span class='line'>  do_that
</span><span class='line'>end while some_condition</span></code></pre></td></tr></table></div></figure>


<p>A while&rsquo;s type is always Nil.</p>

<p>Similar to an if, if a while&rsquo;s condition is a variable, the variable is guaranteed to not be nil inside the body. If the condition is an var.is_a?(Type) test, var is guaranteed to be of type Type inside the body. And if the condition is a var.responds_to?(:method), var is guaranteed to be of a type that responds to that method.</p>

<p>The type of a variable after a while depends on the type it had before the while and the type it had before leaving the while&rsquo;s body:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>a = 1
</span><span class='line'>while some_condition
</span><span class='line'>  # a :: Int32 | String
</span><span class='line'>  a = "hello"
</span><span class='line'>  # a :: String
</span><span class='line'>  a.length
</span><span class='line'>end
</span><span class='line'># a :: Int32 | String</span></code></pre></td></tr></table></div></figure>


<h4>5.6.until</h4>

<p>An <em>until</em> executes its body until its condition is truthy. An until is just syntax sugar for a while with the condition negated:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>until some_condition
</span><span class='line'>  do_this
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>while !some_condition
</span><span class='line'>  do_this
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>An <em>until</em> can also be used in its suffix form, causing the body to be executed at least once. break and next can also be used inside an until.</p>

<h4>5.7.&amp;&amp;</h4>

<p>An <em>&amp;&amp;</em> (and) evaluates its left hand side. If its truthy, it evaluates its right hand side and has that value. Otherwise it has the value of the left hand side. Its type is the union of the types of both sides.</p>

<p>You can think an <em>&amp;&amp;</em> as syntax sugar of an <em>if</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>some_exp1 && some_exp2
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>tmp = some_exp1
</span><span class='line'>if tmp
</span><span class='line'>  some_exp2
</span><span class='line'>else
</span><span class='line'>  tmp
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<h4>5.8.||</h4>

<p>An <em>||</em> (or) evaluates its left hand side. If its falsey, it evaluates its right hand side and has that value. Otherwise it has the value of the left hand side. Its type is the union of the types of both sides.</p>

<p>You can think an <em>||</em> as syntax sugar of an <em>if</em>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>some_exp1 || some_exp2
</span><span class='line'>
</span><span class='line'># The above is the same as:
</span><span class='line'>tmp = some_exp1
</span><span class='line'>if tmp
</span><span class='line'>  tmp
</span><span class='line'>else
</span><span class='line'>  some_exp2
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>I will present about types and methods in part 3.
Thanks!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Work With Chef Server]]></title>
    <link href="http://codeforfoods.net/blog/2014/12/01/work-with-chef-server/"/>
    <updated>2014-12-01T16:44:10+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/12/01/work-with-chef-server</id>
    <content type="html"><![CDATA[<p>In <a href="blog/2014/11/07/php-cooking/">previous post</a> I have wrote how to use Chef Solo to setup and deploy a Server with PHP stuff. Today I&rsquo;d like to use Chef Server for storing Chef&rsquo;s configurations (Cookbooks, Roles, Enviroments, Data Bags) and Bootstrap a server use Chef Server.</p>

<h1>Setup Chef Server</h1>

<p>The easiest way to get started with a Chef server is to use Opscode’s <a href="http://www.opscode.com/hosted-chef/">Hosted Chef</a>–it’s free for up to 5 nodes. Once you exceed 5 nodes you can decide whether to pay a monthly fee or install your own Chef server.</p>

<ul>
<li>Register your free trial of hosted Chef</li>
</ul>


<p><img src="https://lh5.googleusercontent.com/-PeezzBJhRrE/VHwwAKgzq7I/AAAAAAAAABk/OBw78YVf5Mk/w707-h604-no/Sign_Up_-_Chef_Manage.png"></p>

<ul>
<li>Get pem key from profile</li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-_tKhvVNO0u8/VHww8xtE59I/AAAAAAAAABw/O_cbtONexe0/w791-h640-no/Chef_-_Account_Management.png"></p>

<ul>
<li>Generate Knife config</li>
</ul>


<p><img src="https://lh4.googleusercontent.com/-xyw-Lzc3V5Y/VHwzDvnqQwI/AAAAAAAAACY/RJsXXJP_6VY/w710-h640-no/Chef_Manage_and_php-cooking_%E2%80%94_bash_%E2%80%94_162%C3%9730.png"></p>

<ul>
<li>Fork the <code>php-cooking</code> from <a href="blog/2014/11/07/php-cooking/">previous post</a></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://github.com/code-for-food/php-cooking.git # fork from github</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Move to <code>php-cooking</code> and copy client key and validation key to <code>.chef</code> folder.</p></li>
<li><p>Replace the knife.rb in .chef folder</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">current_dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'><span class="n">log_level</span>                <span class="ss">:info</span>
</span><span class='line'><span class="n">log_location</span>             <span class="no">STDOUT</span>
</span><span class='line'><span class="n">node_name</span>                <span class="s2">&quot;codeforfoods&quot;</span>
</span><span class='line'><span class="n">client_key</span>               <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/codeforfoods.pem&quot;</span> <span class="c1"># replace by your key</span>
</span><span class='line'><span class="n">validation_client_name</span>   <span class="s2">&quot;chicken-validator&quot;</span>
</span><span class='line'><span class="n">validation_key</span>           <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/chicken-validator.pem&quot;</span> <span class="c1"># replace by your key</span>
</span><span class='line'><span class="n">chef_server_url</span>          <span class="s2">&quot;https://api.opscode.com/organizations/chicken&quot;</span>
</span><span class='line'><span class="n">cache_type</span>               <span class="s1">&#39;BasicFile&#39;</span>
</span><span class='line'><span class="n">cache_options</span><span class="p">(</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/.chef/checksums&quot;</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook_path</span>    <span class="o">[</span><span class="s2">&quot;cookbooks&quot;</span><span class="p">,</span> <span class="s2">&quot;site-cookbooks&quot;</span><span class="o">]</span>
</span><span class='line'><span class="n">node_path</span>        <span class="s2">&quot;nodes&quot;</span>
</span><span class='line'><span class="n">role_path</span>        <span class="s2">&quot;roles&quot;</span>
</span><span class='line'><span class="n">environment_path</span> <span class="s2">&quot;environments&quot;</span>
</span><span class='line'><span class="n">data_bag_path</span>    <span class="s2">&quot;data_bags&quot;</span>
</span><span class='line'><span class="n">encrypted_data_bag_secret</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">/encrypted_data_bag_secret&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Upload cookbooks to Chef server</p>

<pre><code>  knife cookbook upload --all
</code></pre></li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-0WxqaSjoQfE/VHw9TgYqHEI/AAAAAAAAACo/qyVX1k3ZFdY/w266-h293-no/php-cooking_%E2%80%94_bash_%E2%80%94_162%C3%9730.png"></p>

<p>View on Chef server</p>

<p><img src="https://lh3.googleusercontent.com/-_jRaxKzYeac/VHw92i4RIYI/AAAAAAAAACw/ybd_zPQg7gA/w775-h591-no/Chef_Manage_and_Picasa_3.png"></p>

<ul>
<li><p>Upload Roles to Chef Server</p>

<pre><code>   knife role from file roles/myapp.json 
   knife role from file roles/myapp_deploy.json
</code></pre></li>
</ul>


<p>View on Server</p>

<p><img src="https://lh6.googleusercontent.com/-ARi99k01P8E/VHw_QKAtUPI/AAAAAAAAAC8/weO6WZ8ub-o/w558-h186-no/Chef_Manage.png"></p>

<ul>
<li>Create new enviroment called <code>staging</code> by create staging.json file in <code>enviroments</code> folder</li>
</ul>


<figure class='code'><figcaption><span>staging.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;staging&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;apache2&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;listen_ports&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="s2">&quot;80&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;443&quot;</span>
</span><span class='line'>      <span class="p">]</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;ext_conf_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/php5/apache2/conf.d&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;ubuntu&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;root_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/var/www/codeforfoods&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;server_name&quot;</span><span class="p">:</span> <span class="s2">&quot;phpdev.codeforfoods.net&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Environment&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;environment&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Upload Enviroments to Chef Server</p>

<pre><code>  knife environment from file environments/dev.json 
  knife environment from file environments/staging.json 
</code></pre></li>
</ul>


<p>View on Server</p>

<p><img src="https://lh4.googleusercontent.com/-kUMwE9lMI1k/VHxAFiJZKcI/AAAAAAAAADE/tVMTf4MMHhQ/w333-h240-no/Chef_Manage.png"></p>

<ul>
<li><p>Create an encrypted data bag</p>

<ul>
<li><p>Create encrypted data bag key, the key would help to decrypted the data bag</p>

<pre><code>  openssl rand -base64 512 | tr -d 'rn' &gt; ~/.chef/encrypted_data_bag_secret
  chmod 600 ~/.chef/encrypted_data_bag_secret
</code></pre></li>
<li><p>Add below line to <code>.chef/knife.rb</code></p>

<pre><code>  encrypted_data_bag_secret "#{current_dir}/encrypted_data_bag_secret"
</code></pre></li>
<li><p>Create the encrypted data bage</p>

<pre><code>   knife data bag create --secret-file ~/.chef/encrypted_data_bag_secret secrets myapp
</code></pre></li>
</ul>


<p>  <img src="https://lh6.googleusercontent.com/--OFW4K4ZuFk/VHxfvrX4DCI/AAAAAAAAADU/SGCTIKaQW9s/w290-h249-no/php-cooking_%E2%80%94_vim_%E2%80%94_162%C3%9730.png"></p>

<p>  View on Server</p>

<p>  <img src="https://lh3.googleusercontent.com/-1W37bGO_9FU/VHxifiyiOCI/AAAAAAAAADg/VsHn4LbYVf4/w958-h421-no/Chef_Manage.png"></p></li>
</ul>


<h1>Setup Vagrant use chef-client as provision</h1>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'><span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
</span><span class='line'><span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span class='line'><span class="no">CHEF_PATH</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span class='line'><span class="no">SYNC_PATH</span> <span class="o">=</span> <span class="s2">&quot;./www&quot;</span>
</span><span class='line'><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;ubuntu14.04&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://oss-binaries.phusionpassenger.com/vagrant/boxes/latest/ubuntu-14.04-amd64-vbox.box&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.34.100&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;devphp.congdang.com&quot;</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>   <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnshostresolver1&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnsproxy1&quot;</span><span class="p">,</span>        <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--memory&quot;</span><span class="p">,</span>              <span class="s2">&quot;1024&quot;</span> <span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="s1">&#39;11.16.0&#39;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Your organization name for hosted Chef </span>
</span><span class='line'>  <span class="n">orgname</span> <span class="o">=</span> <span class="s2">&quot;chicken&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Set the Chef node ID based on environment variable NODE, if set. Otherwise default to vagrant-$USER</span>
</span><span class='line'>  <span class="n">node</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;NODE&#39;</span><span class="o">]</span>
</span><span class='line'>  <span class="n">node</span> <span class="o">||=</span> <span class="s2">&quot;vagrant-codeforfoods&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_client</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">chef_server_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.opscode.com/organizations/</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">validation_key_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/.chef/</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">-validator.pem&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">validation_client_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">orgname</span><span class="si">}</span><span class="s2">-validator&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">encrypted_data_bag_secret_key_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/.chef/encrypted_data_bag_secret&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">node_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">node</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">provisioning_path</span> <span class="o">=</span> <span class="s2">&quot;/etc/chef&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="ss">:debug</span>
</span><span class='line'>    <span class="c1">#chef.log_level = :info</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>    <span class="n">chef</span><span class="o">.</span><span class="n">add_role</span><span class="p">(</span><span class="s2">&quot;myapp&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">#chef.json.merge!({ :mysql_password =&gt; &quot;foo&quot; }) # You can do this to override any default attributes for this node.</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="no">SYNC_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:owner</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                          <span class="ss">:mount_options</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;dmode=777&#39;</span><span class="p">,</span><span class="s1">&#39;fmode=777&#39;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Starting <code>Vagrant</code></p>

<pre><code>    vagrant up
</code></pre>

<p>Chef the webapp on browser</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">http</span><span class="p">:</span><span class="sr">//</span><span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">34</span><span class="o">.</span><span class="mi">100</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h1>Bootstrap a Server</h1>

<p><a href="http://cloudshare.com">Cloudshare</a> provides a easy way to create new node for testing <a href="http://learn.getchef.com/ubuntu/bootstrap-your-node/">More detail here</a></p>

<ul>
<li>Get a Linux machine to bootstrap</li>
</ul>


<p><img src="https://lh5.googleusercontent.com/-rJtVKEyp_-k/VHx18JYfv0I/AAAAAAAAADw/fECENQ9LPqo/w661-h524-no/Machines.png"></p>

<ul>
<li><p>Bootstrap your node</p>

<pre><code>  knife bootstrap uvo1vinqr3ty38kwnpn.vm.cld.sr -x sysadmin -P Oi9YB7HTfP --sudo -N node1 -r 'role[myapp]' -E staging
</code></pre></li>
</ul>


<p>** If you meet the error while creating the node, please see the comment in this <a href="https://groups.google.com/forum/#!topic/learnchef-fundamentals-webinar/LYe_i_QIWdU">https://groups.google.com/forum/#!topic/learnchef-fundamentals-webinar/LYe_i_QIWdU</a></p>

<p>Error</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>54.79.58.34   knife ssl check -c /etc/chef/client.rb
</span><span class='line'>54.79.58.34 <span class="sb">```</span>
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Starting Chef Client, version 11.16.4
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 <span class="o">================================================================================</span>
</span><span class='line'>54.79.58.34 Chef encountered an error attempting to load the node data <span class="k">for</span> <span class="s2">&quot;testnode&quot;</span>
</span><span class='line'>54.79.58.34 <span class="o">================================================================================</span>
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Authentication Error:
</span><span class='line'>54.79.58.34 ---------------------
</span><span class='line'>54.79.58.34 Failed to authenticate to the chef server <span class="o">(</span>http 401<span class="o">)</span>.
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Server Response:
</span><span class='line'>54.79.58.34 ----------------
</span><span class='line'>54.79.58.34 Failed to authenticate as <span class="s1">&#39;testnode&#39;</span>. Ensure that your node_name and client key are correct.
</span><span class='line'>54.79.58.34
</span><span class='line'>54.79.58.34 Relevant Config Settings:
</span><span class='line'>54.79.58.34 -------------------------
</span><span class='line'>54.79.58.34 chef_server_url   <span class="s2">&quot;https://api.opscode.com/organizations/cd-chef&quot;</span>
</span><span class='line'>54.79.58.34 node_name         <span class="s2">&quot;testnode&quot;</span>
</span><span class='line'>54.79.58.34 client_key        <span class="s2">&quot;/etc/chef/client.pem&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>SSH to server and do this command</p>

<pre><code>    sudo rm -rf /etc/chef/client.pem
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Protocol]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/28/rails-protocol/"/>
    <updated>2014-11-28T10:05:34+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/28/rails-protocol</id>
    <content type="html"><![CDATA[<p>A guide for writing great web apps.</p>

<h4>Set Up Laptop</h4>

<p>Set up your laptop with :</p>

<ul>
<li><p><a href="https://github.com/thoughtbot/laptop">https://github.com/thoughtbot/laptop</a></p></li>
<li><p><a href="https://github.com/thoughtbot/dotfiles">https://github.com/thoughtbot/dotfiles</a></p></li>
</ul>


<h4>Create App</h4>

<p>Get Suspenders.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install suspenders</span></code></pre></td></tr></table></div></figure>


<p>Create the app.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>suspenders app --heroku true --github organization/app</span></code></pre></td></tr></table></div></figure>


<h4>Set Up App</h4>

<p>Get the code</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@github.com:organization/app.git</span></code></pre></td></tr></table></div></figure>


<p>Set up the app&rsquo;s dependencies</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd project
</span><span class='line'>./bin/setup</span></code></pre></td></tr></table></div></figure>


<p>Use Heroku config to get ENV variables. (<a href="https://github.com/ddollar/heroku-config">https://github.com/ddollar/heroku-config</a>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku config:pull --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Delete extra lines in .env, leaving only those needed for app to function properly. For example: BRAINTREE_MERCHANT_ID and S3_SECRET.</p>

<p>Use Foreman to run the app locally (<a href="https://github.com/ddollar/foreman">https://github.com/ddollar/foreman</a>)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>foreman start</span></code></pre></td></tr></table></div></figure>


<p>It uses your .env file and Procfile to run processes like Heroku&rsquo;s Cedar stack. (<a href="https://devcenter.heroku.com/articles/cedar">https://devcenter.heroku.com/articles/cedar</a>)</p>

<h4>Git protocol</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/protocol/git">https://github.com/thoughtbot/guides/tree/master/protocol/git</a></p>

<h4>Product Review</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/protocol/product-review">https://github.com/thoughtbot/guides/tree/master/protocol/product-review</a></p>

<h4>Code Review</h4>

<p><a href="https://github.com/thoughtbot/guides/tree/master/code-review">https://github.com/thoughtbot/guides/tree/master/code-review</a></p>

<ul>
<li><p>Review data integrity closely, such as migrations that make irreversible changes to the data, and whether there is a related todo to make a database backup during the staging and production deploys.</p></li>
<li><p>Review SQL queries for potential SQL injection.</p></li>
<li><p>Review whether dependency upgrades include a reason in the commit message, such as a link to the dependency&rsquo;s
ChangeLog or NEWS file.</p></li>
<li><p>Review whether new database indexes are necessary if new columns or SQL queries were added.</p></li>
<li><p>Review whether new scheduler (cron) tasks have been added and whether there is a related todo in the project management system to add it during the staging and production deploys.</p></li>
</ul>


<h4>Deploy</h4>

<p>View a list of new commits. View changed files.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git fetch staging
</span><span class='line'>git log staging/master..master
</span><span class='line'>git diff --stat staging/master</span></code></pre></td></tr></table></div></figure>


<p>If necessary, add new environment variables.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku config:add NEW_VARIABLE=value --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Deploy to Heroku</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push staging</span></code></pre></td></tr></table></div></figure>


<p>If necessary, run migrations and restart the dynos.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku run rake db:migrate --remote staging
</span><span class='line'>heroku restart --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Introspect to make sure everything&rsquo;s ok.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>watch heroku ps --remote staging</span></code></pre></td></tr></table></div></figure>


<p>Test the feature in browser.</p>

<p>Deploy to production.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git fetch production
</span><span class='line'>git log production/master..master
</span><span class='line'>git diff --stat production/master
</span><span class='line'>heroku config:add NEW_VARIABLE=value --remote production
</span><span class='line'>git push production
</span><span class='line'>heroku run rake db:migrate --remote production
</span><span class='line'>heroku restart --remote production
</span><span class='line'>watch heroku ps --remote production</span></code></pre></td></tr></table></div></figure>


<p>Watch logs and metrics dashboards.</p>

<p>Close pull request and comment Merged.</p>

<h4>Set Up Production Environment</h4>

<ul>
<li><p>Make sure that your Procfile is set up to run Unicorn. (<a href="https://devcenter.heroku.com/articles/procfile">https://devcenter.heroku.com/articles/procfile</a>)</p></li>
<li><p>Make sure the PG Backups add-on is enabled.</p></li>
<li><p>Create a read-only Heroku Follower for your production database. If a Heroku database outage occurs, Heroku can use the follower to get your app back up and running faster. (<a href="https://devcenter.heroku.com/articles/heroku-postgres-follower-databases#high-availability-with-followers">https://devcenter.heroku.com/articles/heroku-postgres-follower-databases#high-availability-with-followers</a>)</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Scaling Ruby on Rails by Caching Your Database Queries]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries/"/>
    <updated>2014-11-28T08:34:54+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/28/scaling-ruby-on-rails-by-caching-your-database-queries</id>
    <content type="html"><![CDATA[<p>This article would help you to scaling your app with caching your database queries.</p>

<p>Its pretty good to use active-record in ruby on rails, relationships, find_by methods, where queries everything makes your life much more simpler as a developer but sooner or later your application becomes slow. At that time you need to work on optimizations. There are lot of work around for optimizations and one of them in caching the queries. The company I work for is StudyPad and we have a product ie splashmath and that has over 9 millions users using it across multiple platforms. The amount of traffic that we get is pretty huge and caching one of the thing that helped us to solve out scaling problems. Here is quick idea to cache your queries in memcache.</p>

<h4>Basic requirements</h4>

<p>There are few requirements for this. First is the dalli gem and memcache installed on your machine.</p>

<h4>Basic structure of the application.</h4>

<p>We have lot of static/seed data which change very less and the queries on those things are pretty high. So first thing to handle that static data.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skills &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>So in order to get skills for a grade, its pretty simple</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade = Grade.first
</span><span class='line'>skills = grade.skills</span></code></pre></td></tr></table></div></figure>


<p>Now for that matter every time we are fetching skills for a grade its gonna hit the database and get the results. So its time to get this query and its results cached.</p>

<p>Assuming you have configured dalli gem easily and you have memcached up and running. Here is a simple method to cache the results</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, id, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>So instead of fetching skills like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade.skills</span></code></pre></td></tr></table></div></figure>


<p>we are gonna get it like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>grade.cached_skills</span></code></pre></td></tr></table></div></figure>


<p>So whats its gonna do. Its gonna fetch the results first time from the database and store it in cache. Next time its gonna return the results from the cache. Note few things here</p>

<ul>
<li><p>Understand the pattern of the key. [self.class.name, id, :skills] is your key here.</p></li>
<li><p>Cache will expire in 240.hours. You can customize it as per your needs. Better keep a constant for this somewhere in your application.</p></li>
<li><p>In cached_skills methods we are keep records not the active-record relations that why we have to convert into array by using to_a else active-record-relation will be cached and database query will be executed.</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>skills.to_a</span></code></pre></td></tr></table></div></figure>


<h4>Expiring the cache.</h4>

<p>We are caching the query results but we are not expiring the results. What if some skill has changed. Grade object is not getting any notification for that, so cache is stale, we need to expire it. So we can write a after_commit hook for skill to expire its grade object’s cache</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># in skill model
</span><span class='line'>after_commit :flush_cache
</span><span class='line'>
</span><span class='line'>def flush_cache
</span><span class='line'>  Rails.cache.delete([self.grade.class.name, self.grade_id, :skills])
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>This is enough to make sure you cache is never stale. There is another way to handle the expiring cache. Lets see that.</p>

<h4>Another way</h4>

<p>We redefine the models like this</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skills &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Note we have added touch: true in skills, and now we redefine our cached_skills method again:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now just caching this we don’t need to expire the cache manually, when ever skills get updated it will touch its parent object object grade, that will update its updated_at value and that specific cache will be never used, as key attribute updated_at has been changed.</p>

<h4>The problem with second approach</h4>

<p>But there is a problem. Assume you have 10 different has_many relationships for grade and you are caching it all, now everytime a skill has be changed all the other cache keys for grade relationships will be useless too. For example: Grade has_many topics</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Grade &lt; ActiveRecord::Base
</span><span class='line'>  has_many :skills
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Skill &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>class Topic &lt; ActiveRecord::Base
</span><span class='line'>  belongs_to :grade, touch: true
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># In Grade model
</span><span class='line'>def cached_skills
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :skills], expires_in: 240.hours) {
</span><span class='line'>    skills.to_a
</span><span class='line'>  }
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>def cached_topics
</span><span class='line'>  Rails.cache.fetch([self.class.name, updated_at.to_i, :topics], expires_in: 240.hours) {
</span><span class='line'>    topics.to_a
</span><span class='line'>  }
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Now in this case changing any skill will make topics cache useless, but that’s not the case when you are trying to expire it manually. So both approach has pros and cons, first will ask you write more code and second expire cache more frequently. You have to make that choice as per your needs.</p>

<h4>What else?</h4>

<p>Using the same base principle you can cache lot of queries like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Grade.cached_find_by_id(1)
</span><span class='line'>Skill.first.cached_grade</span></code></pre></td></tr></table></div></figure>


<p>This approach helped us to reduce the load on RDS and make things pretty fast. I hope this will help you too. Let me know you feedback or some tips that made you system more faster</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Crytal: Syntax and Semantics Part 1]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/27/crytal-syntax-and-semantics-part-1/"/>
    <updated>2014-11-27T17:05:09+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/27/crytal-syntax-and-semantics-part-1</id>
    <content type="html"><![CDATA[<h3>1. Comments</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># This is a comment</span></code></pre></td></tr></table></div></figure>


<h3>2.Local variables</h3>

<p>Local variables start with lowercase letters. They are declared when you first assign them a value.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>name = "Crystal"
</span><span class='line'>age = 1</span></code></pre></td></tr></table></div></figure>


<p>Their type is inferred from their usage, not only from their initializer. In general, they are just value holders associated with the type that the programmer expects them to have according to their location and usage on the program.</p>

<p>For example, reassinging a variable with a different expression makes it have that expression’s type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var = "Hello"
</span><span class='line'># At this point 'var' is a String
</span><span class='line'>
</span><span class='line'>var = 1
</span><span class='line'># At this point 'var' is an Int32</span></code></pre></td></tr></table></div></figure>


<p>Underscores are allowed at the beginning of a variable name, but these names are reserved for the compiler, so their use is not recommended (and it also makes the code uglier to read).</p>

<h3>3.Global variables</h3>

<p>Global variables start with a dollar sign ($). They are declared when you first assign them a value.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$year = 2014</span></code></pre></td></tr></table></div></figure>


<p>Their type is the combined type of all expressions that were assigned to them. Additionally, if you program reads a global variable before it was ever assigned a value it will also have the Nil type.</p>

<h3>4.Assignment</h3>

<p>Assignment is done with the equal (=) character.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Assigns to a local variable
</span><span class='line'>local = 1
</span><span class='line'>
</span><span class='line'># Assigns to an instance variable
</span><span class='line'>@instance = 2
</span><span class='line'>
</span><span class='line'># Assigns to a class variable
</span><span class='line'>@@class = 3
</span><span class='line'>
</span><span class='line'># Assigns to a global variable
</span><span class='line'>$global = 4</span></code></pre></td></tr></table></div></figure>


<p>Some syntax sugar that contains the = character is available:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>local += 1  # same as: local = local + 1
</span><span class='line'>
</span><span class='line'># The above is valid with these operators:
</span><span class='line'># +, -, *, /, %, |, &, ^, **, &lt;&lt;, &gt;&gt;
</span><span class='line'>
</span><span class='line'>local ||= 1 # same as: local || (local = 1)
</span><span class='line'>local &&= 1 # same as: local && (local = 1)</span></code></pre></td></tr></table></div></figure>


<p>A method invocation that ends with = has syntax sugar:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># A setter
</span><span class='line'>person.name=("John")
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>person.name = "John"
</span><span class='line'>
</span><span class='line'># An indexed assignment
</span><span class='line'>objects.[]=(2, 3)
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>objects[2] = 3
</span><span class='line'>
</span><span class='line'># Not assignment-related, but also syntax sugar:
</span><span class='line'>objects.[](2, 3)
</span><span class='line'>
</span><span class='line'># The above can be written as:
</span><span class='line'>objects[2, 3]</span></code></pre></td></tr></table></div></figure>


<p>The = operator syntax sugar is also available to setters and indexers. Note that || and &amp;&amp; use the []? method to check for key prescence.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>person.age += 1        # same as: person.age = person.age + 1
</span><span class='line'>
</span><span class='line'>person.name ||= "John" # same as: person.name || (person.name = "John")
</span><span class='line'>person.name &&= "John" # same as: person.name && (person.name = "John")
</span><span class='line'>
</span><span class='line'>objects[1] += 2        # same as: objects[1] = objects[1] + 2
</span><span class='line'>
</span><span class='line'>objects[1] ||= 2       # same as: objects[1]? || (objects[1] = 2)
</span><span class='line'>objects[1] &&= 2       # same as: objects[1]? && (objects[1] = 2)</span></code></pre></td></tr></table></div></figure>


<p>I will present about control expressions in part 2.
Thanks!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Crystal: Getting Started]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/27/crystal-getting-started/"/>
    <updated>2014-11-27T16:43:51+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/27/crystal-getting-started</id>
    <content type="html"><![CDATA[<h3>Introduction:</h3>

<p>Crystal is a programming language that resembles Ruby but compiles to native code and tries to be much more efficient, at the cost of disallowing certain dynamic aspects of Ruby.</p>

<h3>Installation</h3>

<h4>1. On Debian and Ubuntu</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl http://dist.crystal-lang.org/apt/setup.sh | sudo bash
</span><span class='line'>apt-key adv --keyserver keys.gnupg.net --recv-keys 09617FD37CC06B54
</span><span class='line'>echo "deb http://dist.crystal-lang.org/apt crystal main" &gt; /etc/apt/sources.list.d/crystal.list
</span><span class='line'>sudo apt-get install crystal</span></code></pre></td></tr></table></div></figure>


<h4>2. On Mac OSX using Homebrew</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew tap manastech/crystal
</span><span class='line'>brew install crystal</span></code></pre></td></tr></table></div></figure>


<h3>Hello World</h3>

<p>This is the simplest way to write the Hello World program in Crystal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>puts "Hello World"</span></code></pre></td></tr></table></div></figure>


<p>First create a file hello.cr containing your code. Then type in the console:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod +x hello.cr
</span><span class='line'>crystal hello.cr</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s all! Hope you guys love it :D
I will have another post about syntax and semantics :)
Thanks</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Rails] Get Youtube Download Link]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/19/rails-get-youtube-download-link/"/>
    <updated>2014-11-19T08:39:56+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/19/rails-get-youtube-download-link</id>
    <content type="html"><![CDATA[<h3>Installation:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install viddl-rb
</span></code></pre></td></tr></table></div></figure>


<h3>Usage:</h3>

<p>Download a video: viddl-rb <a href="http://www.youtube.com/watch?v=QH2-TGUlwu4">http://www.youtube.com/watch?v=QH2-TGUlwu4</a>
<br>
Viddl-rb supports the following command line options:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-e, --extract-audio              Extract the audio track of the download to a separate file
</span><span class='line'>-a, --abort-on-failure           Abort if one of the videos in a list fails to download
</span><span class='line'>-u, --url-only                   Just display the download url without downloading the file.
</span><span class='line'>-t, --title-only                 Just display the title without downloading the file.
</span><span class='line'>-f, --filter REGEX               Filters a video playlist according to the regex (Youtube only right now)
</span><span class='line'>-s, --save-dir DIRECTORY         Specifies the directory where videos should be saved
</span><span class='line'>-d, --downloader TOOL            Specifies the tool to download with. Supports 'wget', 'curl', 'aria2c' and 'net-http'
</span><span class='line'>-q, --quality QUALITY            Specifies the video format and resolution in the following way: width:height:format (e.g. 1280:720:mp4)
</span><span class='line'>                                 The width, height and format may be omitted with a *.
</span><span class='line'>                                 For example, to match any quality with a height of 720 pixels in any format specify --quality *:720:*
</span><span class='line'>-h, --help                       Displays the help screen</span></code></pre></td></tr></table></div></figure>


<h3>Library Usage:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>require 'viddl-rb'
</span><span class='line'>
</span><span class='line'>download_urls = ViddlRb.get_urls("http://www.youtube.com/watch?v=QH2-TGUlwu4")
</span><span class='line'>download_urls.first     # =&gt; "http://o-o.preferred.arn06s04.v3.lscac ..."</span></code></pre></td></tr></table></div></figure>


<p>The ViddlRb module has the following module public methods:</p>

<h4>get_urls_names(url)</h4>

<p> &ndash; Returns an array of one or more hashes that has the keys :url which points to the download url and :name which points to the name (which is a filename safe version of the video title with a file extension). Returns nil if the url is not recognized by any plugins.</p>

<h4>get_urls_exts(url)</h4>

<p>&ndash; Same as get_urls_names but with just the file extension (for example &ldquo;.mp4&rdquo;) instead of the full filename, and the :name key is replaced with :ext. Returns nil if the url is not recognized by any plugins.</p>

<h4>get_urls(url)</h4>

<p>&ndash; Returns an array of download urls for the specified video url. Returns nil if the url is not recognized by any plugins.</p>

<h4>get_names(url)</h4>

<p>&ndash; Returns an array of filenames for the specified video url. Returns nil if the url is not recognized by any plugins.</p>

<h4>io=(io_object)</h4>

<p>&ndash; By default all plugin output to stdout will be suppressed when the library is used. If you are interested in the output of a plugin, you can set an IO object that will receive all plugin output using this method.</p>

<h3>Requirements:</h3>

<blockquote><ul>
<li>curl/wget/aria2c or the progress bar gem</li>
<li>Nokogiri</li>
<li>ffmpeg if you want to extract audio tracks from the videos</li>
</ul>
</blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Let Flood Test Your Site With Flood.io]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/18/let-flood-test-your-site-with-flood-dot-io/"/>
    <updated>2014-11-18T23:45:08+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/18/let-flood-test-your-site-with-flood-dot-io</id>
    <content type="html"><![CDATA[<p>Flood IO is a cloud based load testing platform for <a href="https://flood.io/help/floods/jmeter.apache.org">JMeter</a> and <a href="https://flood.io/help/floods/gatling-tool.org">Gatling</a> that lets you scale out your tests across the globe using our on demand or your own hosted AWS infrastructure. In this article we introduce you to JMeter and how to run your first Flood test.</p>

<p>In this article, I&rsquo;d like to use <code>JMeter</code> as testing scripts</p>

<h3>Getting JMeter</h3>

<p>JMeter can be downloaded <a href="http://jmeter.apache.org/download_jmeter.cgi">here</a> and typically you can start JMeter using the <code>jmeter.cmd</code> or <code>jmeter.sh</code> scripts located in the downloaded archive <code>bin</code> directory.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/jmeter-example.jmx_UserstimkoopmansGitfloodflood-sitepublicjmeter-example.jmx_-_Apache_JMeter_2.11_r1554548_2014-10-06_17-37-40.jpg"></p>

<h3>Creating a Test Plan</h3>

<p>Once you have created a <a href="https://flood.io/jmeter-example.jmx">basic test plan</a> and saved it locally as a <code>.jmx</code> file, you can upload this to Flood IO to create your first Flood test.</p>

<h3>Creating a Flood Test</h3>

<p>After you login to Flood IO you can click the &ldquo;+&rdquo; icon or from your <a href="https://flood.io/dashboard/floods">Floods dashboard</a> you can click the &ldquo;Create Flood&rdquo; button to create a new Flood.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-36-50.jpg"></p>

<p>In the new Flood form, add the <code>.jmx</code> test plan you created using JMeter to the Files input and select a Grid to run your Flood test on. You can optionally set the &ldquo;Name&rdquo; or &ldquo;Tags&rdquo; to help identify the test in your dashboard.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-49-17.jpg"></p>

<h3>Start your Flood Test</h3>

<p>Read about more [advanced settings] or simply click the &ldquo;Start Flood&rdquo; button to launch your test.</p>

<p><img src="https://s3.amazonaws.com/flood-io-support/Flood_IO_2014-10-06_17-53-22.jpg"></p>

<p>You will be redirected to a Flood report which will show you results in real time from the test you just executed on the chosen Grid.</p>

<h3>The results in real time</h3>

<ul>
<li>Summary about AVG Response Time, Concurence Users and Transaction Rate</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-cbQyegUkAt8/VGt77yF3o_I/AAAAAAAAADE/zIceQUvDRnY/w957-h199-no/Flood_IO.png"></p>

<ul>
<li>Summary report by chart</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-LdsF3ANppGY/VGt8J5PJa3I/AAAAAAAAADM/dN75wBnBQ7M/w958-h404-no/Flood_IO.png"></p>

<ul>
<li>Detail transaction</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-NLjHvr3TwME/VGt8m92lEoI/AAAAAAAAADc/9o8vDRsEzBE/w957-h384-no/Flood_IO.png"></p>

<ul>
<li>You can trace your http connection</li>
</ul>


<p><img src="https://lh3.googleusercontent.com/ItYy1EO4CTEt8fFFxFNKxkwdgR9uey33boD5RZ_MyA=w400-h207-p-no"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Php-cooking]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/07/php-cooking/"/>
    <updated>2014-11-07T11:03:51+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/07/php-cooking</id>
    <content type="html"><![CDATA[<p>This article would help you to setup Chef for PHP stuff step by step</p>

<h4>Step 1 - Install required tools</h4>

<ul>
<li>Ruby</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>https://www.ruby-lang.org/en/installation/</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Knife Solo</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install knife-solo</span></code></pre></td></tr></table></div></figure>


<ul>
<li>librarian-chef</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install librarian-chef</span></code></pre></td></tr></table></div></figure>


<h4>Step 2 - Setup</h4>

<ul>
<li><p>Create new directory for your project</p>

<pre><code>  mkdir /your-path/php-cooking
</code></pre></li>
<li><p>Move to php-cooking folder</p>

<pre><code>  cd /your-path/php-cooking
</code></pre></li>
<li><p>Initialize librarian-chef</p>

<pre><code>  librarian-chef init
</code></pre></li>
<li><p>Initialize knife solo</p>

<pre><code>  knife solo init .
</code></pre></li>
</ul>


<p>After initialazing, you should see the folder structure like below (notice that I added the <code>www</code> folder for containing the php&rsquo;s web app )</p>

<p><img src="https://lh5.googleusercontent.com/-e9FKrxVfB50/VFxCHoV-CaI/AAAAAAAAABg/aBM_nLe5EMY/s418/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>Ok, now is time for adding the necessary cookbooks to <code>Cheffile</code></p>

<figure class='code'><figcaption><span>Cheffile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'><span class="c1">#^syntax detection</span>
</span><span class='line'>
</span><span class='line'><span class="n">site</span> <span class="s1">&#39;https://supermarket.getchef.com/api/v1&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;php&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.4.6&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s2">&quot;php55&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/aporat/php55-cookbook&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;php-mcrypt&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;apache2&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;= 1.0.0&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 5.5.2&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">cookbook</span> <span class="s1">&#39;composer&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 1.0.5&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is including <code>php</code>, <code>apache</code>, <code>mysql</code> and <code>composer</code></p>

<p>Next we will need to install all cookbooks which be specified in <code>Cheffile</code></p>

<pre><code>    librarian-chef install
</code></pre>

<p>After installing, you should see the cookbooks folder as below</p>

<p><img src="https://lh4.googleusercontent.com/-zg-x4_s1JLw/VFxCwKlTkfI/AAAAAAAAACE/sVvPi3G5hGA/s492/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>That&rsquo;s good so far, now we should setup <code>roles</code>, <code>enviroments</code> and <code>owner cookbooks</code> for install the web server and deploy your application to web server.</p>

<ul>
<li>Setup <code>dev environent</code>: create a file called <code>dev.json</code> in enviroment folder</li>
</ul>


<p><img src="https://lh4.googleusercontent.com/-zg-x4_s1JLw/VFxCwKlTkfI/AAAAAAAAACE/sVvPi3G5hGA/s492/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<figure class='code'><figcaption><span>dev.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;apache2&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;listen_ports&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>      <span class="s2">&quot;80&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;443&quot;</span>
</span><span class='line'>    <span class="p">]</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;ext_conf_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/etc/php5/apache2/conf.d&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;root_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;server_name&quot;</span><span class="p">:</span> <span class="s2">&quot;phpdev.codeforfoods.net&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Environment&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;environment&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Setup <code>myapp role</code> and <code>myapp deploy role</code>: create 2 file <code>myapp.json</code> and <code>myapp_deploy.json</code> in roles folder</li>
</ul>


<p><img src="https://lh6.googleusercontent.com/-yoM7_7UiHBY/VFxCYAUZpJI/AAAAAAAAABs/xbd3d4fabn8/s184/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<figure class='code'><figcaption><span>myapp.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myapp&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The role for app servers&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;override_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;run_list&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>          <span class="s2">&quot;recipe[apt]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[build-essential]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[composer]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp]&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>      <span class="nt">&quot;env_run_lists&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nt">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>              <span class="s2">&quot;recipe[apt]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[build-essential]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[composer]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp]&quot;</span><span class="p">,</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>myapp_deploy.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'> <span class="p">{</span>
</span><span class='line'>      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myapp_deploy&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The role for app servers&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;json_class&quot;</span><span class="p">:</span> <span class="s2">&quot;Chef::Role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;default_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;override_attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nt">&quot;chef_type&quot;</span><span class="p">:</span> <span class="s2">&quot;role&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nt">&quot;run_list&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>          <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>      <span class="p">],</span>
</span><span class='line'>      <span class="nt">&quot;env_run_lists&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nt">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>              <span class="s2">&quot;recipe[myapp::deploy]&quot;</span>
</span><span class='line'>          <span class="p">]</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Create a owner cookbook called <code>myapp</code>, this should be store in <code>site-cookbooks</code> folder</p>

<pre><code>      knife cookbook create myapp
</code></pre></li>
</ul>


<p><img src="https://lh3.googleusercontent.com/-7wagSNwnOWI/VFxESOwCZCI/AAAAAAAAACs/Xe7vU8MlycA/s415/README_md_-__Users_congdang_my-training_codeforfoods_php-cooking_-_Atom.png"></p>

<p>Notes:</p>

<p>1) 2 recipes, one for myapp default and other for myapp deploy</p>

<figure class='code'><figcaption><span>defaut.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;mysql::client&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;mysql::server&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php55&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_mysql&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_curl&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php::module_memcache&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2::mod_php5&quot;</span>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;apache2::mod_expires&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">include_recipe</span> <span class="s2">&quot;php-mcrypt&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># disble default site.</span>
</span><span class='line'><span class="n">apache_site</span> <span class="s2">&quot;default&quot;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">enable</span> <span class="kp">false</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>deploy.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># grant permission for webroot</span>
</span><span class='line'><span class="n">directory</span> <span class="n">node</span><span class="o">[</span><span class="s2">&quot;myapp&quot;</span><span class="o">][</span><span class="s2">&quot;root_path&quot;</span><span class="o">]</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">owner</span> <span class="s2">&quot;root&quot;</span>
</span><span class='line'>  <span class="n">group</span> <span class="s2">&quot;root&quot;</span>
</span><span class='line'>  <span class="n">mode</span> <span class="s2">&quot;0755&quot;</span>
</span><span class='line'>  <span class="n">action</span> <span class="ss">:create</span>
</span><span class='line'>  <span class="n">recursive</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># reading the data bag</span>
</span><span class='line'><span class="c1">#secrets = Chef::EncryptedDataBagItem.load(&quot;secrets&quot;, &quot;myapp&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span> <span class="o">==</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>      <span class="c1"># enable kizang-api site.</span>
</span><span class='line'>      <span class="n">web_app</span> <span class="s1">&#39;myapp&#39;</span> <span class="k">do</span>
</span><span class='line'>      <span class="n">template</span> <span class="s1">&#39;site.conf.erb&#39;</span>
</span><span class='line'>      <span class="n">docroot</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;myapp&#39;</span><span class="o">][</span><span class="s1">&#39;root_path&#39;</span><span class="o">]</span>
</span><span class='line'>      <span class="n">server_name</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;myapp&#39;</span><span class="o">][</span><span class="s1">&#39;server_name&#39;</span><span class="o">]</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>2) the Apache configuration template file</p>

<figure class='code'><figcaption><span>site.conf.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">&lt;</span><span class="no">VirtualHost</span> <span class="o">*</span><span class="p">:</span><span class="mi">80</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="no">ServerName</span> <span class="o">&lt;</span><span class="sx">%= @params[:server_name] %&gt;</span>
</span><span class='line'><span class="sx"> DocumentRoot &lt;%=</span> <span class="vi">@params</span><span class="o">[</span><span class="ss">:docroot</span><span class="o">]</span> <span class="sx">%&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx"> &lt;Directory &lt;%= @params[:docroot] %&gt;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="no">Options</span> <span class="no">FollowSymLinks</span>
</span><span class='line'>      <span class="no">AllowOverride</span> <span class="no">All</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="sx">% if </span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;apache&#39;</span><span class="o">][</span><span class="s1">&#39;version&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;2.4&#39;</span> <span class="o">-</span><span class="sx">%&gt;</span>
</span><span class='line'><span class="sx">             Require all granted</span>
</span><span class='line'><span class="sx">         &lt;% elsif node[&#39;apache&#39;][&#39;version&#39;] == &#39;2.2&#39; -%&gt;</span>
</span><span class='line'>          <span class="no">Order</span> <span class="n">allow</span><span class="p">,</span><span class="n">deny</span>
</span><span class='line'>          <span class="no">Allow</span> <span class="n">from</span> <span class="n">all</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="sx">% end </span><span class="o">-</span><span class="sx">%&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="sx">     RewriteEngine On</span>
</span><span class='line'><span class="sx">     RewriteBase /</span>
</span><span class='line'><span class="sx">     RewriteRule ^index\.php$ - [L]</span>
</span><span class='line'><span class="sx">     RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="sx">     RewriteCond %{REQUEST_FILENAME} !-d</span>
</span><span class='line'><span class="sx">     RewriteRule . /index.php [L]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="sx"> &lt;/Directory&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="no">Directory</span> <span class="sr">/&gt;</span>
</span><span class='line'><span class="sr">     Options FollowSymLinks</span>
</span><span class='line'><span class="sr">     AllowOverride None</span>
</span><span class='line'><span class="sr"> &lt;/</span><span class="no">Directory</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="no">ErrorLog</span> <span class="err">$</span><span class="p">{</span><span class="no">APACHE_LOG_DIR</span><span class="p">}</span><span class="o">/</span><span class="n">myapp</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">log</span>
</span><span class='line'>  <span class="c1"># Possible values include: debug, info, notice, warn, error, crit,</span>
</span><span class='line'>  <span class="c1"># alert, emerg.</span>
</span><span class='line'>  <span class="no">LogLevel</span> <span class="nb">warn</span>
</span><span class='line'>  <span class="no">CustomLog</span> <span class="err">$</span><span class="p">{</span><span class="no">APACHE_LOG_DIR</span><span class="p">}</span><span class="o">/</span><span class="n">myapp</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">log</span> <span class="n">combined</span>
</span><span class='line'><span class="o">&lt;</span><span class="sr">/VirtualHost&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Step 3 - Setup vagrant for create development environment</h4>

<p>Ok! Almost Chef setting up is done, now you should create a <code>Vagrantfile</code> and use chef-solo as provision for install development server</p>

<figure class='code'><figcaption><span>Vagrantfile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'> <span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'>  <span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
</span><span class='line'>  <span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span class='line'>  <span class="no">CHEF_PATH</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span class='line'>  <span class="no">SYNC_PATH</span> <span class="o">=</span> <span class="s2">&quot;./www&quot;</span>
</span><span class='line'>  <span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;ubuntu14.04&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://oss-binaries.phusionpassenger.com/vagrant/boxes/latest/ubuntu-14.04-amd64-vbox.box&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.34.100&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;devphp.congdang.com&quot;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>   <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnshostresolver1&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnsproxy1&quot;</span><span class="p">,</span>        <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>          <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--memory&quot;</span><span class="p">,</span>              <span class="s2">&quot;1024&quot;</span> <span class="o">]</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="s1">&#39;11.16.0&#39;</span>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">cookbooks_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/cookbooks&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/site-cookbooks&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">environments_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/environments&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">roles_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/roles&quot;</span>
</span><span class='line'>      <span class="n">chef</span><span class="o">.</span><span class="n">add_role</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="no">SYNC_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:owner</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                                                      <span class="ss">:mount_options</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;dmode=777&#39;</span><span class="p">,</span><span class="s1">&#39;fmode=777&#39;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that, I used <code>www</code> vagrant&rsquo;s sync folder. That means you should store your web application in <code>www</code> folder. In this article I just created a simple php file in that folder</p>

<figure class='code'><figcaption><span>index.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'>  <span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>      <span class="k">echo</span> <span class="s2">&quot;Hello PHP world!!!!&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally you need to run vagrant and check the site on the browser</p>

<pre><code>        vagrant up
</code></pre>

<p>Once vagrant upping is done, you can check your application on browser</p>

<pre><code>        http://192.168.34.100
</code></pre>

<h4>Conclusion</h4>

<p>You can pull all code from my github</p>

<figure class='code'><figcaption><span>repository on gihub</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>https://github.com/code-for-food/php-cooking.git <span class="c"># fork from github</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this Chef, I&rsquo;ve setup <code>mysql</code> as well but I just only used <code>php</code> and <code>apache</code>. You can add more code in <code>defaul.rb</code> recipe for using <code>mysql</code> for your project. If you have any question, you can drop an email to me <a href="mailto:code.for.food.14@gmail.com">codeforfoods</a>.</p>

<p>Thanks for your reading!!!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Switch Careers]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/06/how-to-switch-careers/"/>
    <updated>2014-11-06T11:12:00+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/06/how-to-switch-careers</id>
    <content type="html"><![CDATA[<p>Making a big career change is never easy, especially if you&rsquo;ve got kids to support, a mortgage to pay, and a car to worry about. People will tell you you&rsquo;ve got it great where you are and that the grass is always greener on the other side. What they don&rsquo;t know is what&rsquo;s best for you. Switching careers doesn&rsquo;t have to be the daunting process everyone makes it out to be if you are organized, practical, and thorough with your research.</p>

<h4>Method 1 of 5: What Would You Rather Be Doing?</h4>

<p><img src="http://www.wikihow.com/images/2/25/Switch-Careers-Step-1.jpg"></p>

<p><strong>1. Tackle the golden question</strong></p>

<p>If you had all the money in the world, what would you be doing with yourself? Don&rsquo;t hold back. This is brainstorming time. Make a list of all the things you&rsquo;d rather be doing with your time. Your first few answers will probably be something like: Take a tropical vacation, spend more time with the kids, etc. But push your thinking beyond that. Ask yourself if you are content with stringent working hours, accounting to higher authorities, etc. If this is what you don&rsquo;t like, then strive for a self-actualizing job that gives you exactly what you desire or hope to achieve.</p>

<p><strong>2. Consider careers that interest you.</strong></p>

<p>You might have studied accounting at college for the sake of job security and financial certainty. But all the time, perhaps you really wanted to be a park ranger or a freelance troubleshooter. Think back to what once motivated you when you were younger––you will often find the kernel of the things that still motivate and thrill you there.</p>

<ul>
<li>Write a list of the things you loved to do once and the career ideas you had.</li>
<li>Add down the ideas for preferred careers that you actually have now. Don&rsquo;t hold back for such reasons as &ldquo;lack training&rdquo; or &ldquo;no resources to risk it&rdquo;. At this stage, write down the career paths you&rsquo;d really rather be following.</li>
</ul>


<h4>Method 2 of 5: Working Out What Else You Can Do</h4>

<p><img src="http://www.wikihow.com/images/3/36/Switch-Careers-Step-2.jpg"></p>

<p><strong>1. Evaluate your skills and talents.</strong>
Ask yourself: What am I good at? What do I most enjoy doing? Write down every skill you&rsquo;re capable of. Don&rsquo;t be shy. Does your current job give you satisfaction and utilize all your potential?</p>

<p><img src="http://www.wikihow.com/images/a/ac/Switch-Careers-Step-3.jpg"></p>

<p><strong>2. Identify transferable skills.</strong>
After having listed all known skills and talents, identify what skills will best transfer over into the new line of work you&rsquo;re hoping to change to. The longer the list, the easier the transition.</p>

<ul>
<li>If you have only a few or no transferable skills, do not be discouraged. New skills can be easily learned, while old skills can act as the foundation blocks.</li>
<li>Other life experiences can also make this transition easy––remain conscious of the basic life skills that have already been acquired and avoid discounting them. Give yourself a boost and some credit.</li>
<li>Pursue your passion to find happiness. Is there a passion outside of your work that has brought you a range of skills that you might be able to use to bolster your transition case?</li>
</ul>


<p><img src="http://www.wikihow.com/images/e/eb/Switch-Careers-Step-4.jpg"></p>

<p><strong>3. Think of jobs that allow you to do what you really want to do, at least in some form.</strong>
 In what ways will you be able to apply your skills and talents every day? Be creative and open-minded. Focus on what your inner feelings guide you to do.</p>

<p><img src="http://www.wikihow.com/images/e/e2/Switch-Careers-Step-7.jpg"></p>

<p><strong>4. Make a list of everything you want in your new job.</strong> make one of everything you don&rsquo;t want, such as revisiting tedious aspects of your current job. Having this dual list of preferences to guide you will make it easier to check off the jobs that fit and delete the ones that don&rsquo;t; the list helps you to be more discerning and less ready to jump into the same situation.</p>

<ul>
<li><p>Be prepared to work gradually towards your needs and wants; steady accomplishments will make the career transition less risky and more likely to work out for you.</p></li>
<li><p>The list helps you to listen to your gut reactions and not ignore warnings that something isn&rsquo;t a good match for you. You are changing careers precisely because you want to remove yourself from the warnings, so heed that feeling if it arises.</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[7 Characteristics That Separate a Boss From a Leader]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/06/7-characteristics-that-separate-a-boss-from-a-leader/"/>
    <updated>2014-11-06T08:11:12+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/06/7-characteristics-that-separate-a-boss-from-a-leader</id>
    <content type="html"><![CDATA[<p>While a leader can be a boss, not every boss is a leader. Although leaders and</p>

<p>While a boss is mostly concerned with outcomes, a leader feels responsible for the process of that outcome and the people who see it out. Check out some major points that distinguish a leader from a boss:</p>

<h4>1. Leaders lead rather than rule.</h4>

<p>Throughout history, the best chiefs headed their troops in fights or campaigns or whatever. The troops were not afraid because their leader was right there with them. Leaders are there to lead the team forward and to move together.</p>

<p><img src="https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/s960x960/10750009_414949625326965_7306927192227304603_o.jpg"></p>

<h4>2. Leaders listen and speak rather than command.</h4>

<p>Bosses tend to give orders; they need their employees to listen and to obey. However, leaders always listen to the opinions of their colleagues and regard them as important.</p>

<p><img src="https://scontent-a-sin.xx.fbcdn.net/hphotos-xpa1/v/t1.0-9/1901348_414949695326958_1617544880402520783_n.jpg?oh=f1cd8754b1f4cb16cf53b4270c3087d8&oe=54EDAB49"></p>

<p>Leaders are always ready for advising, discussion and any feedback an employee has to offer. This reciprocity makes any individual employee feel stronger and gives him or her confidence to follow the leader.</p>

<h4>3. Leaders motivate rather than terrify.</h4>

<p>While working on projects, people have their ups and downs. Through this roller coaster, bosses are more likely to intimidate into action while leaders will motivate to action.</p>

<p><img src="https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-xpa1/v/t1.0-9/10734090_414949795326948_3416275930774179251_n.jpg?oh=810fc4bbc2c48acc50901f0ace834780&oe=54D510A4&__gda__=1425216796_844fce8da41177cca8e81b7e8420446f"></p>

<p>One of the best things about leaders is that they offer empathy and prepare a group for the tasks at hand. This is very important, seeing as whenever colleagues are not prepared for certain duties, leaders are there to support, teach and back them up. Leaders know that each employee is on the team for a reason and they have faith in every concerted effort.</p>

<h4>4. Leaders teach and learn rather than expect and ignore.</h4>

<p>A true leader is the person who has self-esteem, but who is not arrogant nor embarrassed to learn from those with lower titles. They know that it is never late to learn more.</p>

<p><img src="https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/10390082_414949875326940_5418551154960633658_n.jpg?oh=29e60279326157a42885c54f67bd5089&oe=54F60741&__gda__=1423894173_22dbfb4334e5d1b501a5a56f149bd558"></p>

<p>This explains the tendency of leaders to always pay attention to their colleagues, knowing there is always more to learn from them. Moreover, leaders are not only takers, but givers, as well. A good leader is not greedy for sharing knowledge and experience with someone else; instead, the leader teaches and nurtures new professionals.</p>

<h4>5. Leaders take part rather than stay aside.</h4>

<p>While bosses choose to stay aside in the job, leaders take initiative. They watch over the progress of work, make adjustments where necessary and aid team members. They choose to be a part of the team rather than bossing the team around.</p>

<h4>6. Leaders reprimand rather than scold or shout.</h4>

<p>When necessary, a leader offers constructive criticism. However, a leader never scolds or shouts at any individual, especially in public. They do understand that they are dealing with people and no one has right to humiliate others. Rather, the leader talks to the person individually and without any spike in temper.</p>

<p><img src="https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xaf1/v/t1.0-9/10302103_414949405326987_7411112196686359758_n.jpg?oh=6cf1816ef68d247e18d323ce9e567143&oe=54E9D98C&__gda__=1423805501_e5f258925a4f00bf50521f72097a608f"></p>

<h4>7. Leaders establish equal relationships.</h4>

<p>Anyone who has ever worked on a team knows what it feels like when the manager chooses his favorites and non-favorites. It always causes stress and tension among team members which comprises productivity.</p>

<p><img src="https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-xfp1/v/t1.0-9/10712864_414949598660301_9088054071801414512_n.jpg?oh=fae2d01837a2ae2a3000f50907882919&oe=54D5DB78&__gda__=1424870129_0066f0dd1c3aa8f1ef57f9abef7cba6d"></p>

<p>A good leader tries to treat everyone equally and to not allow personal preferences affect the team dynamic.</p>

<p>During your life, you will face two kinds of managers: leaders and bosses. It does not matter how high the position of these individuals; bossy people are more likely to fail while those who lead will succeed.</p>

<p>Maybe the things I mentioned above do not make any sense for you now, but eventually, you will experience the difference and garner a greater understanding of which manager you prefer for your own professional life.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[API Documentation Made Beautiful With Apiary.io]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/04/api-documentation-made-beautiful-with-apiary-dot-io/"/>
    <updated>2014-11-04T22:19:17+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/04/api-documentation-made-beautiful-with-apiary-dot-io</id>
    <content type="html"><![CDATA[<h5>Apiary is a free, hosted API documentation repository</h5>

<p>The least exciting part of any software project I work on is the documentation. With APIs in particular, documentation can be time consuming because it needs to provide enough detail for any consumer to understand and interface with it. For that reason, proper documentation of an API is even more crucial.</p>

<p>The most recent two projects I&rsquo;ve been working on both required that full APIs be developed in addition to the core of the platform. On one of them I was building both the API and the client to consume it so the need to describe the API was nil. On the other I&rsquo;m working in tandem with a colleague and need to communicate the API calls and requirements as they&rsquo;re completed. My first attempt at doing so was pretty lame. I typed out the API calls for a particular controller and attached sample requests/responses in text files and emailed them across the room. I&rsquo;m happy to say that was the last time I did that.</p>

<p>As soon as I hit send on that email I knew I was doing something stupid. I asked another colleague about what he had used in the past and he pointed me toward <a href="http://apiary.io">Apiary.io</a>. Apiary is a web based repository for API documentation that also includes server mocking, code samples, automated testing, and GitHub sync. It&rsquo;s free for most needs including both public and private API documentation.</p>

<p>I created a new account in a single click since I was already logged into GitHub and I was off and running creating my API documentation. Once I got the hang of the Markdown related syntax called <a href="http://apiary.io/blueprint">API Blueprint</a>, I was able to quickly document each API resource in far greater detail than I had been previously. I then invited my colleague to the Apiary API project and things became much better for both of us. Now he can simply refresh the page to pick up any new documentation and get full detail and examples of each API resource at will.</p>

<p>What does the resulting documentation look like you might ask? Here&rsquo;s a screenshot but you&rsquo;ll want to head over to <a href="http://docs.themoviedb.apiary.io/">one of the featured APIs</a> to check it out for yourself.</p>

<p><img src="http://images.techhive.com/images/idge/imported/article/itw/2014/02/28/image1-100480198-orig.png"></p>

<p>So far we&rsquo;ve been pretty happy using Apiary. There are some helpful features to the system that can aid your efforts such as reusable request and response models, but it&rsquo;s no silver bullet. Good documentation takes time and it&rsquo;s probably not possible to completely avoid that.</p>

<p>The only real complaint I have with the system so far is that your entire API document is constructed in a single, loooong page. This works OK for reading because things collapse and there is a table of contents, but for editing, it can be a mess. Aside from that it&rsquo;s been a great collaboration and organization tool. It&rsquo;s unlikely that my API would be as well documented as it is in Apiary if I had chosen to write it in some other way.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CORS on Apache]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/04/cors-on-apache/"/>
    <updated>2014-11-04T08:32:41+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/04/cors-on-apache</id>
    <content type="html"><![CDATA[<p>To add the CORS authorization to the header using Apache, simply add the following line inside either the <code>&lt;Directory&gt;</code>, <code>&lt;Location&gt;</code>, <code>&lt;Files&gt;</code> or <code>&lt;VirtualHost&gt;</code> sections of your server config (usually located in a *.conf file, such as <code>httpd.conf</code> or <code>apache.conf</code>), or within a <code>.htaccess</code> file:</p>

<pre><code>    Header set Access-Control-Allow-Origin "*"
</code></pre>

<p>To ensure that your changes are correct, it is strongly reccomended that you use</p>

<pre><code>    apachectl -t
</code></pre>

<p>to check your configuration changes for errors. After this passes, you may need to reload Apache to make sure your changes are applied by running the command</p>

<pre><code>    sudo service apache2 reload
</code></pre>

<p>More detail</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://enable-cors.org/server_apache.html</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Aws] - Adding a Ec2 Node to an Elastic Load Balancer]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/03/aws-adding-a-note-to-an-elastic-load-balancer/"/>
    <updated>2014-11-03T21:42:35+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/03/aws-adding-a-note-to-an-elastic-load-balancer</id>
    <content type="html"><![CDATA[<h3>Installing</h3>

<ul>
<li><p>Install <code>Python</code></p>

<pre><code>          brew install python
</code></pre></li>
<li><p>Install <code>AWS CLI</code> - AWS CLI (<a href="http://aws.amazon.com/cli/">http://aws.amazon.com/cli/</a>) is command line tool for working with Amazon Web Service. In this project, we used it for checking the <code>Elastic Load Balancer</code> (ELB) is existed or not, creating an ELB, adding the <code>Health check</code> for ELB, retrieving the <code>EC2 instance</code> information registering <code>EC2 instances</code> to ELB.</p>

<pre><code>  pip install awscli
</code></pre></li>
<li><p>Create config for aws at ~/.aws/config and add below content</p></li>
</ul>


<figure class='code'><figcaption><span>Config file</span><a href='http://aws.amazon.com/cli/'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>profile default<span class="o">]</span>
</span><span class='line'><span class="nv">output</span> <span class="o">=</span> json
</span><span class='line'><span class="nv">region</span> <span class="o">=</span> us-east-1
</span><span class='line'><span class="nv">aws_access_key_id</span> <span class="o">=</span> &lt;access key id&gt;
</span><span class='line'><span class="nv">aws_secret_access_key</span> <span class="o">=</span> &lt;secret access key&gt;
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Install <code>jq</code> <a href="http://xmodulo.com/how-to-parse-json-string-via-command-line-on-linux.html">http://xmodulo.com/how-to-parse-json-string-via-command-line-on-linux.html</a>.</p>

<p>  <code>jq</code> is tool for parser, filter, map, and transform JSON-structured data effortlessly by command-line. We used it for parser the json data which retured form AWS CLI. <a href="http://codeforfoods.net/blog/2014/11/03/command-line-json-processor/">Read more on my post</a></p>

<pre><code>  brew install jq 
</code></pre></li>
</ul>


<h3>Coding</h3>

<figure class='code'><figcaption><span>add-node-2-elb.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'>
</span><span class='line'><span class="c"># ask to add the node to load balancer</span>
</span><span class='line'>
</span><span class='line'><span class="nv">node</span><span class="o">=</span><span class="nv">$1</span><span class="p">;</span>
</span><span class='line'><span class="nv">role</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span>
</span><span class='line'><span class="nv">env</span><span class="o">=</span><span class="nv">$3</span><span class="p">;</span>
</span><span class='line'><span class="nv">lbName</span><span class="o">=</span><span class="s2">&quot;MyLoadBalancer&quot;</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$node&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&quot;$role&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$role&quot;</span> <span class="o">==</span> <span class="s2">&quot;web&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$env&quot;</span> <span class="o">==</span> <span class="s2">&quot;prod&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>      <span class="nv">lbName</span><span class="o">=</span><span class="s2">&quot;MyLoadBalancerProd&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>      <span class="nv">lbName</span><span class="o">=</span><span class="s2">&quot;MyLoadBalancerStaging&quot;</span>
</span><span class='line'>  <span class="k">fi</span>   
</span><span class='line'><span class="k">else</span>   
</span><span class='line'>  <span class="nb">printf</span> <span class="s2">&quot;Please enter a valid role (&#39;web&#39;) \n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">fi</span> 
</span><span class='line'>
</span><span class='line'><span class="c"># http://docs.aws.amazon.com/cli/latest/reference/elb/describe-load-balancers.html</span>
</span><span class='line'><span class="nv">MyLoadBalancer</span><span class="o">=</span><span class="k">$(</span>
</span><span class='line'>  aws elb describe-load-balancers <span class="se">\</span>
</span><span class='line'>      --load-balancer-name <span class="nv">$lbName</span> <span class="se">\</span>
</span><span class='line'>  <span class="k">)</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># the load balancer is node existed, create the ELB first</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$MyLoadBalancer&quot;</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  
</span><span class='line'>  <span class="c"># http://docs.aws.amazon.com/cli/latest/reference/elb/create-load-balancer.html </span>
</span><span class='line'>  aws elb create-load-balancer <span class="se">\</span>
</span><span class='line'>      --load-balancer-name <span class="nv">$lbName</span> <span class="se">\</span>
</span><span class='line'>      --listeners <span class="nv">Protocol</span><span class="o">=</span>HTTP,LoadBalancerPort<span class="o">=</span>80,InstanceProtocol<span class="o">=</span>HTTP,InstancePort<span class="o">=</span><span class="m">80</span> <span class="se">\</span>
</span><span class='line'>      --availability-zones us-east-1a <span class="se">\</span>
</span><span class='line'>      --security-groups sg-bac6eddf <span class="se">\</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">#http://docs.aws.amazon.com/cli/latest/reference/elb/configure-health-check.html</span>
</span><span class='line'>  aws elb configure-health-check <span class="se">\</span>
</span><span class='line'>      --load-balancer-name <span class="nv">$lbName</span> <span class="se">\</span>
</span><span class='line'>      --health-check <span class="nv">Target</span><span class="o">=</span>HTTP:80/index.php,Interval<span class="o">=</span>30,UnhealthyThreshold<span class="o">=</span>2,HealthyThreshold<span class="o">=</span>2,Timeout<span class="o">=</span>3
</span><span class='line'>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="nb">printf</span> <span class="s2">&quot;$MyLoadBalancer\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># http://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html</span>
</span><span class='line'><span class="c"># http://xmodulo.com/how-to-parse-json-string-via-command-line-on-linux.html</span>
</span><span class='line'><span class="c"># MAC - brew install jq</span>
</span><span class='line'>
</span><span class='line'><span class="nv">nodeId</span><span class="o">=</span><span class="k">$(</span>aws ec2 describe-instances --filters <span class="s2">&quot;Name=ip-address,Values=$node&quot;</span> <span class="p">|</span> jq <span class="s2">&quot;.Reservations[0].Instances[0].InstanceId&quot;</span><span class="k">)</span>
</span><span class='line'><span class="nv">nodeId</span><span class="o">=</span><span class="s2">&quot;${nodeId%\&quot;}&quot;</span><span class="p">;</span>
</span><span class='line'><span class="c"># http://docs.aws.amazon.com/cli/latest/reference/elb/register-instances-with-load-balancer.html</span>
</span><span class='line'>aws elb register-instances-with-load-balancer <span class="se">\</span>
</span><span class='line'>  --load-balancer-name <span class="nv">$lbName</span> <span class="se">\</span>
</span><span class='line'>  --instances <span class="s2">&quot;${nodeId#\&quot;}&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="nb">printf</span> <span class="s2">&quot;Please enter the node and role adding to ELB.\n&quot;</span><span class="p">;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>Usage</h3>

<pre><code>./add-node-2-elb.sh 123.456.789.910 web staging 
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Command-line JSON Processor]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/03/command-line-json-processor/"/>
    <updated>2014-11-03T11:23:05+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/03/command-line-json-processor</id>
    <content type="html"><![CDATA[<p><code>jq</code> is a command-line JSON processor.</p>

<p>If you want to learn to use jq, read the documentation at <a href="http://stedolan.github.io/jq">http://stedolan.github.io/jq</a>. This documentation is generated from the docs/ folder of this repository. You can also try it online at <a href="http://jqplay.org">http://jqplay.org</a>.</p>

<h3>Basic filters</h3>

<figure class='code'><figcaption><span>Example1</span><a href='http://stedolan.github.io/jq/manual/exemple1'>exemple</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>jq <span class="s1">&#39;.&#39;</span>
</span><span class='line'>Input <span class="s2">&quot;Hello, world!&quot;</span>
</span><span class='line'>Output    <span class="s2">&quot;Hello, world!&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span>Example2</span><a href='http://stedolan.github.io/jq/manual/exemple2'>exemple</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>jq <span class="s1">&#39;.foo&#39;</span>
</span><span class='line'>Input <span class="o">{</span><span class="s2">&quot;foo&quot;</span>: 42, <span class="s2">&quot;bar&quot;</span>: <span class="s2">&quot;less interesting data&quot;</span><span class="o">}</span>
</span><span class='line'>Output    42
</span></code></pre></td></tr></table></div></figure>


<h3>More details please check it out from original website</h3>

<figure class='code'><figcaption><span>Original website</span><a href='http://stedolan.github.io/jq/manual'>original website</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>http://stedolan.github.io/jq/manual/ 
</span></code></pre></td></tr></table></div></figure>


<p>Next post, I&rsquo;d like to use this for parser the <code>aws</code> result. (coming soon.)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Nodejs Cooking]]></title>
    <link href="http://codeforfoods.net/blog/2014/11/03/nodejs-cooking/"/>
    <updated>2014-11-03T09:47:33+07:00</updated>
    <id>http://codeforfoods.net/blog/2014/11/03/nodejs-cooking</id>
    <content type="html"><![CDATA[<ul>
<li><p>This project is Chef-Solo, this help to setup development base on Nodejs and Mysql</p></li>
<li><p>This also includes a demo about Simple API which using Express and Mysql</p></li>
</ul>


<h4>What was including</h4>

<ul>
<li>Using <a href="https://docs.getchef.com/chef_solo.html">Chef-solo</a> for cooking</li>
<li>Using <a href="http://matschaffer.github.io/knife-solo">Knife-solo</a> for initialazing, adding, editing <code>cookbooks</code>, <code>roles</code>, <code>environment</code></li>
<li>Using <a href="https://github.com/applicationsonline/librarian-chef">librarian-chef</a> for managing <code>cookbooks</code></li>
</ul>


<h4>Installing</h4>

<ul>
<li>Installing <code>librarian-chef</code> and <code>knife-solo</code></li>
<li><p>initialazing librarian, this would create new forder with named <code>cookbooks</code> and a <code>Cheffile</code></p>

<pre><code>  librarian-chef init
</code></pre></li>
<li><p>Adding <code>nvm</code> and <code>msql</code> cookbook to <code>Cheffile</code></p>

<pre><code>  cookbook 'mysql', '~&gt; 5.5.2'
  cookbook 'nvm', '~&gt; 0.1.0'  
</code></pre></li>
<li><p>Initialazing <code>knife-solo</code>, this would create the folder structure</p>

<pre><code>  knife-solo init
</code></pre></li>
<li><p>Installing cookbooks from <code>Cheffile</code></p>

<pre><code>  libratian-chef install
</code></pre></li>
<li><p>Creating an encryption key</p>

<pre><code>  openssl rand -base64 512 | tr -d 'rn' &gt; ~/.chef/encrypted_data_bag_secret
  chmod 600 ~/.chef/encrypted_data_bag_secret
</code></pre></li>
<li><p>Adding the path of encryption key to <code>.chef/knife.rb</code></p>

<pre><code>  knife[:secret_file] = ".chef/encrypted_data_bag_secret"
</code></pre></li>
<li><p>Creating a data bag, this stores the security inforamtion (ex database&rsquo;s password)</p>

<pre><code>   knife solo data bag create secrets myapp
</code></pre></li>
</ul>


<p>Enter something</p>

<pre><code>    {
        "id": "myapp",
         "aws_config": {
            "AWSAccessKeyId": "xxx",
            "AWSSecretKey": "xxx"
          },
      "db_config": {
        "dev": [
            {
                "name": "default",
                "mysql_root_password": "abc@123",
                "hostname": "localhost",
                "username": "root",
                "password": "abc@123",
                "database": "myqpp"
            }
        ]
      }
    }
</code></pre>

<ul>
<li><p>The encrypted data bag will be stored into <code>data-bag/secrets/myapp.js</code></p>

<pre><code>  {
    "id": "myapp",
    "aws_config": {
      "encrypted_data":               "RjARHBKLm0DTbHDeIB5XjTjdWovyvv5T3V9T79UyEOq4/5Km6LaZ4y7leP7/\nNLCNQaJsUZQASaAII3bzkmwamecn03q5XUp4yDzeYcCqyRhP18BnyCxYDcOm\nc0HD1xEVuOanTt5R7ppJMj3kzN02YESN4CA/+70f0Qkp6yexhVo=\n",
      "iv": "Yr9pDrhjZjhLRxHEBna0nw==\n",
      "version": 1,
      "cipher": "aes-256-cbc"
    },
    "db_config": {
      "encrypted_data": "F6iPNUMY+dzao52SpQqHEWlFbGWUBMWSBAy4FinaCQ0Tbh06nDPgSdNI7qoJ\n3DjfrLBZOV1/8xD9t+SkJI3BEvW+yxCnnDPEz+iiZ8/jYJaypy/Bhrn42EC4\ni2VPb66HnVYD4Uq0pObVWzhLATXfqNZ/79I/bTdHTuhGcynDNzRNjyYEDfIF\nG9SuooNjUAduwmLotW//XxMM4uFNZ04hww==\n",
      "iv": "DbN/KOPibOqNtAkLbdBr0w==\n",
      "version": 1,
      "cipher": "aes-256-cbc"
    }
  }
</code></pre></li>
<li><p>Creating a owner cookbook (I created <code>myapp</code> cookbook), this should create at <code>site-cookbook</code> folder</p>

<pre><code>  knife cookbook create  myapp
</code></pre></li>
<li><p>Configurating the default root password for mysql::server add <code>site-cookbooks/myapp/attributes/default.rb</code> (create one if this file is not existed)</p>

<pre><code>  secrets = Chef::EncryptedDataBagItem.load("secrets", "myapp")

  default['mysql']['server_root_password']   = secrets["db_config"][node.chef_environment][0]["mysql_root_password"]
  default['mysql']['server_debian_password'] = secrets["db_config"][node.chef_environment][0]["mysql_root_password"]
  default['mysql']['server_repl_password']   = secrets["db_config"][node.chef_environment][0]["mysql_root_password"]
</code></pre></li>
<li><p>Installing <code>mysql</code> and <code>nvm</code> and <code>node 0.10.33</code> in <code>site-cookbooks/myapp/attributes/recipes/default.rb</code></p>

<pre><code>  include_recipe "mysql::client"
  include_recipe "mysql::server"
  include_recipe 'nvm'

  # install node.js v0.10.5
  nvm_install 'v0.10.33'  do
      from_source true
      alias_as_default true
      action :create
  end
</code></pre></li>
<li><p>Creating <code>deploy recipe</code>, this recipe would  help to deploy latest code from <code>github</code> to server and <code>start/restart server</code></p></li>
<li><p>Creating the <code>enviroments</code> (<code>dev</code> for Vagrant and <code>prod</code> for real server)</p>

<pre><code>  kinfe evironment create dev
</code></pre></li>
</ul>


<p>Enter something</p>

<pre><code>    {
          "name": "dev",
          "description": "",
          "cookbook_versions": {

          },
          "json_class": "Chef::Environment",
          "chef_type": "environment",
          "default_attributes": {
            "myapp": {
              "root_path": "/vagrant"
            }
        },
        "override_attributes": {

        }
    }
</code></pre>

<ul>
<li><p>Creating the <code>roles</code></p>

<pre><code>  knife role create myapp
</code></pre></li>
</ul>


<p>Enter something</p>

<pre><code>    {
      "name": "myapp",
      "description": "",
      "json_class": "Chef::Role",
      "default_attributes": {

      },
      "override_attributes": {

      },
      "chef_type": "role",
      "run_list": [

      ],
      "env_run_lists": {
        "dev": [
          "recipe[myapp]",
          "recipe[myapp::deploy]"
        ]
      }
    }   
</code></pre>

<ul>
<li>Creating <code>Vagrantfile</code> which would use <code>chef-solo</code> as provision</li>
</ul>


<figure class='code'><figcaption><span>Vagrantfile</span><a href='https://github.com/code-for-food/node-cooking/blob/master/Vagrantfile'>Link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># -*- mode: ruby -*-</span>
</span><span class='line'>  <span class="c1"># vi: set ft=ruby :</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
</span><span class='line'>  <span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span class='line'>  <span class="no">CHEF_PATH</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span class='line'>  <span class="no">SYNC_PATH</span> <span class="o">=</span> <span class="s2">&quot;./www&quot;</span>
</span><span class='line'>  <span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&quot;ubuntu14.04&quot;</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box_url</span> <span class="o">=</span> <span class="s2">&quot;https://oss-binaries.phusionpassenger.com/vagrant/boxes/latest/ubuntu-14.04-amd64-vbox.box&quot;</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&quot;private_network&quot;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&quot;192.168.34.100&quot;</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="s2">&quot;devnodejs.chicken.com&quot;</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_x11</span>   <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&quot;virtualbox&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
</span><span class='line'>      <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnshostresolver1&quot;</span><span class="p">,</span> <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>      <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--natdnsproxy1&quot;</span><span class="p">,</span>        <span class="s2">&quot;off&quot;</span>  <span class="o">]</span><span class="p">)</span>
</span><span class='line'>      <span class="n">vb</span><span class="o">.</span><span class="n">customize</span><span class="p">(</span><span class="o">[</span><span class="s2">&quot;modifyvm&quot;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&quot;--memory&quot;</span><span class="p">,</span>              <span class="s2">&quot;1024&quot;</span> <span class="o">]</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">omnibus</span><span class="o">.</span><span class="n">chef_version</span> <span class="o">=</span> <span class="s1">&#39;11.16.0&#39;</span>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="ss">:chef_solo</span> <span class="k">do</span> <span class="o">|</span><span class="n">chef</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">cookbooks_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/cookbooks&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/site-cookbooks&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">environments_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/environments&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">roles_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/roles&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">data_bags_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/data_bags&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">encrypted_data_bag_secret_key_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">CHEF_PATH</span><span class="si">}</span><span class="s2">/.chef/encrypted_data_bag_secret&quot;</span>
</span><span class='line'>         <span class="n">chef</span><span class="o">.</span><span class="n">add_role</span><span class="p">(</span><span class="s1">&#39;myapp&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="no">SYNC_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;/vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="ss">:owner</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="s2">&quot;vagrant&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="ss">:mount_options</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;dmode=777&#39;</span><span class="p">,</span><span class="s1">&#39;fmode=777&#39;</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Usage</h3>

<h4>Develop Environment using Vagrant</h4>

<p>Notes:</p>

<ul>
<li>You must install <a href="https://www.vagrantup.com/">Vagrant</a> first</li>
<li><p>Install <code>vagrant-omnibus</code> plugin</p>

<pre><code>  vagrant plugin install vagrant-omnibus
</code></pre></li>
</ul>


<p>Vagrant up</p>

<pre><code>    vagrant up
</code></pre>

<p>You see something like that</p>

<pre><code>    Running handlers:
    [2014-11-02T07:16:20+00:00] INFO: Running report handlers
    Running handlers complete
    [2014-11-02T07:16:20+00:00] INFO: Report handlers complete
    Chef Client finished, 30/36 resources updated in 756.082469267 seconds
</code></pre>

<h5>Congratulation!!! You are Chef now :)</h5>

<figure class='code'><figcaption><span>git repos</span><a href='https://github.com/code-for-food/node-cooking/blob/master/Vagrantfile'>repos</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="err">$</span> <span class="n">git</span> <span class="nb">clone</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">code</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="n">food</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">cooking</span><span class="o">.</span><span class="n">git</span> <span class="c1"># fork from github</span>
</span></code></pre></td></tr></table></div></figure>


<h3>License</h3>

<p>Written by <a href="mailto:code.for.food.14@gmail.com">code-for-food</a></p>

<p>Copyright &copy; 2014 Code-For-Food.</p>

<p>Welcome any comments, please contact me via</p>

<ul>
<li>Email: <a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#111;&#58;&#99;&#x6f;&#x64;&#x65;&#x2e;&#102;&#x6f;&#x72;&#46;&#102;&#x6f;&#x6f;&#100;&#x2e;&#x31;&#52;&#64;&#x67;&#109;&#x61;&#105;&#x6c;&#46;&#99;&#111;&#109;">&#99;&#x6f;&#x64;&#101;&#46;&#102;&#x6f;&#x72;&#x2e;&#102;&#x6f;&#111;&#100;&#x2e;&#x31;&#x34;&#x40;&#x67;&#109;&#97;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
